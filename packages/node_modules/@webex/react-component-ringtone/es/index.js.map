{"version":3,"file":"index.js","sources":["../src/media/Ringtone.mp3","../src/media/Ringback_v2.mp3","../src/index.js"],"sourcesContent":["export default \"7c45c341e89abe5a.mp3\"","export default \"dd8902c5aab9eeb1.mp3\"","import {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {Howl} from 'howler';\n\nimport RingtoneIncoming from './media/Ringtone.mp3';\nimport RingtoneRingback from './media/Ringback_v2.mp3';\n\nexport const RINGTONE_TYPE_INCOMING = 'RINGTONE_TYPE_INCOMING';\nexport const RINGTONE_TYPE_RINGBACK = 'RINGTONE_TYPE_RINGBACK';\n\nconst propTypes = {\n  play: PropTypes.bool,\n  type: PropTypes.oneOf([RINGTONE_TYPE_INCOMING, RINGTONE_TYPE_RINGBACK]).isRequired\n};\n\nconst defaultProps = {\n  play: false\n};\n\nclass Ringtone extends Component {\n  constructor(props) {\n    super(props);\n    let src;\n\n    switch (props.type) {\n      case RINGTONE_TYPE_INCOMING:\n        src = RingtoneIncoming;\n        break;\n      case RINGTONE_TYPE_RINGBACK:\n        src = RingtoneRingback;\n        break;\n      default:\n    }\n    try {\n      this.audio = new Howl({\n        src: [src],\n        loop: true\n      });\n    }\n    catch (error) {\n      // eslint-disable-reason No other way to log errors yet\n      // eslint-disable-next-line no-console\n      console.warn('Audio not available', error);\n    }\n  }\n\n  componentDidMount() {\n    if (this.props.play && this.audio) {\n      this.audio.play();\n    }\n  }\n\n  componentWillReceiveProps(nextProps) {\n    const {audio} = this;\n\n    if (audio) {\n      if (!nextProps.play && this.props.play) {\n        audio.stop();\n      }\n      else if (nextProps.play && !this.props.play) {\n        audio.play();\n      }\n    }\n  }\n\n  shouldComponentUpdate() {\n    return false;\n  }\n\n  componentWillUnmount() {\n    if (this.audio) {\n      this.audio.unload();\n    }\n  }\n\n  render() {\n    return null;\n  }\n}\n\nRingtone.propTypes = propTypes;\nRingtone.defaultProps = defaultProps;\n\nexport default Ringtone;\n"],"names":["RINGTONE_TYPE_INCOMING","RINGTONE_TYPE_RINGBACK","propTypes","play","PropTypes","bool","type","oneOf","isRequired","defaultProps","Ringtone","Component","constructor","props","src","RingtoneIncoming","RingtoneRingback","audio","Howl","loop","error","console","warn","componentDidMount","componentWillReceiveProps","nextProps","stop","shouldComponentUpdate","componentWillUnmount","unload","render"],"mappings":";;;;AAAA,uBAAe;;ACAf,uBAAe;;MCOFA,sBAAsB,GAAG;MACzBC,sBAAsB,GAAG;AAEtC,MAAMC,SAAS,GAAG;AAChBC,EAAAA,IAAI,EAAEC,SAAS,CAACC,IADA;AAEhBC,EAAAA,IAAI,EAAEF,SAAS,CAACG,KAAV,CAAgB,CAACP,sBAAD,EAAyBC,sBAAzB,CAAhB,EAAkEO;AAFxD,CAAlB;AAKA,MAAMC,YAAY,GAAG;AACnBN,EAAAA,IAAI,EAAE;AADa,CAArB;;AAIA,MAAMO,QAAN,SAAuBC,SAAvB,CAAiC;AAC/BC,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,QAAIC,GAAJ;;AAEA,YAAQD,KAAK,CAACP,IAAd;AACE,WAAKN,sBAAL;AACEc,QAAAA,GAAG,GAAGC,gBAAN;AACA;;AACF,WAAKd,sBAAL;AACEa,QAAAA,GAAG,GAAGE,gBAAN;AACA;AANJ;;AASA,QAAI;AACF,WAAKC,KAAL,GAAa,IAAIC,IAAJ,CAAS;AACpBJ,QAAAA,GAAG,EAAE,CAACA,GAAD,CADe;AAEpBK,QAAAA,IAAI,EAAE;AAFc,OAAT,CAAb;AAID,KALD,CAMA,OAAOC,KAAP,EAAc;AACZ;AACA;AACAC,MAAAA,OAAO,CAACC,IAAR,CAAa,qBAAb,EAAoCF,KAApC;AACD;AACF;;AAEDG,EAAAA,iBAAiB,GAAG;AAClB,QAAI,KAAKV,KAAL,CAAWV,IAAX,IAAmB,KAAKc,KAA5B,EAAmC;AACjC,WAAKA,KAAL,CAAWd,IAAX;AACD;AACF;;AAEDqB,EAAAA,yBAAyB,CAACC,SAAD,EAAY;AACnC,UAAM;AAACR,MAAAA;AAAD,QAAU,IAAhB;;AAEA,QAAIA,KAAJ,EAAW;AACT,UAAI,CAACQ,SAAS,CAACtB,IAAX,IAAmB,KAAKU,KAAL,CAAWV,IAAlC,EAAwC;AACtCc,QAAAA,KAAK,CAACS,IAAN;AACD,OAFD,MAGK,IAAID,SAAS,CAACtB,IAAV,IAAkB,CAAC,KAAKU,KAAL,CAAWV,IAAlC,EAAwC;AAC3Cc,QAAAA,KAAK,CAACd,IAAN;AACD;AACF;AACF;;AAEDwB,EAAAA,qBAAqB,GAAG;AACtB,WAAO,KAAP;AACD;;AAEDC,EAAAA,oBAAoB,GAAG;AACrB,QAAI,KAAKX,KAAT,EAAgB;AACd,WAAKA,KAAL,CAAWY,MAAX;AACD;AACF;;AAEDC,EAAAA,MAAM,GAAG;AACP,WAAO,IAAP;AACD;;AA1D8B;;AA6DjCpB,QAAQ,CAACR,SAAT,GAAqBA,SAArB;AACAQ,QAAQ,CAACD,YAAT,GAAwBA,YAAxB;;;;;"}