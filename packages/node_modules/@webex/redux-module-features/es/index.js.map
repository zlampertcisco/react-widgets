{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["import {Map} from 'immutable';\n\nexport const STORE_FEATURE = 'features/STORE_FEATURE';\n\nexport const initialState = new Map({\n  items: new Map()\n});\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case STORE_FEATURE:\n      return state.mergeIn(['items'], action.payload.feature);\n    default:\n      return state;\n  }\n}\n\nfunction storeFeature(feature) {\n  return {\n    type: STORE_FEATURE,\n    payload: {\n      feature\n    }\n  };\n}\n\n/**\n * Gets the value of the requested feature toggle.\n * @param {string} keyType <developer|user|entitlement>\n * @param {string} key\n * @param {object} spark\n * @returns {Promise}\n */\nexport function getFeature(keyType, key, spark) {\n  return (dispatch) => spark.internal.feature.getFeature(keyType, key)\n    .then((value) => {\n      const result = {};\n\n      result[key] = value;\n      dispatch(storeFeature(result));\n    });\n}\n"],"names":["STORE_FEATURE","initialState","Map","items","reducer","state","action","type","mergeIn","payload","feature","storeFeature","getFeature","keyType","key","spark","dispatch","internal","then","value","result"],"mappings":";;MAEaA,aAAa,GAAG;MAEhBC,YAAY,GAAG,IAAIC,GAAJ,CAAQ;AAClCC,EAAAA,KAAK,EAAE,IAAID,GAAJ;AAD2B,CAAR;AAIb,SAASE,OAAT,CAAiBC,KAAK,GAAGJ,YAAzB,EAAuCK,MAAvC,EAA+C;AAC5D,UAAQA,MAAM,CAACC,IAAf;AACE,SAAKP,aAAL;AACE,aAAOK,KAAK,CAACG,OAAN,CAAc,CAAC,OAAD,CAAd,EAAyBF,MAAM,CAACG,OAAP,CAAeC,OAAxC,CAAP;;AACF;AACE,aAAOL,KAAP;AAJJ;AAMD;;AAED,SAASM,YAAT,CAAsBD,OAAtB,EAA+B;AAC7B,SAAO;AACLH,IAAAA,IAAI,EAAEP,aADD;AAELS,IAAAA,OAAO,EAAE;AACPC,MAAAA;AADO;AAFJ,GAAP;AAMD;AAED;AACA;AACA;AACA;AACA;AACA;AACA;;;AACO,SAASE,UAAT,CAAoBC,OAApB,EAA6BC,GAA7B,EAAkCC,KAAlC,EAAyC;AAC9C,SAAQC,QAAD,IAAcD,KAAK,CAACE,QAAN,CAAeP,OAAf,CAAuBE,UAAvB,CAAkCC,OAAlC,EAA2CC,GAA3C,EAClBI,IADkB,CACZC,KAAD,IAAW;AACf,UAAMC,MAAM,GAAG,EAAf;AAEAA,IAAAA,MAAM,CAACN,GAAD,CAAN,GAAcK,KAAd;AACAH,IAAAA,QAAQ,CAACL,YAAY,CAACS,MAAD,CAAb,CAAR;AACD,GANkB,CAArB;AAOD;;;;;"}