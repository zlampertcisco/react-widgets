{"version":3,"file":"index.js","sources":["../../../../../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport ActivityPost from '@webex/react-component-activity-post';\nimport ActivityShareFiles from '@webex/react-component-activity-share-files';\nimport ActivitySystemMessage, {SYSTEM_MESSAGE_VERBS} from '@webex/react-component-activity-system-message';\nimport {hasAdaptiveCard, FEATURES_WIDGET_ADAPTIVE_CARD_ON, ACTIVITY_CARDS} from '@webex/react-component-utils';\n\nimport styles from './styles.css';\n\nconst POST_VERB = 'post';\nconst SHARE_VERB = 'share';\nconst LINKS_CONTENT_CATEGORY = 'links';\n\n\nconst propTypes = {\n  actor: PropTypes.shape({\n    displayName: PropTypes.displayName\n  }).isRequired,\n  activity: PropTypes.shape({\n    cards: PropTypes.array,\n    component: PropTypes.element,\n    contentCategory: PropTypes.string,\n    content: PropTypes.string,\n    displayName: PropTypes.string,\n    files: PropTypes.shape({\n      items: PropTypes.arrayOf(PropTypes.shape({\n        image: PropTypes.shape({\n          url: PropTypes.string\n        }),\n        thumbnail: PropTypes.string,\n        mimeType: PropTypes.string,\n        url: PropTypes.string\n      }))\n    })\n  }).isRequired,\n  timestamp: PropTypes.string.isRequired,\n  isAdditional: PropTypes.bool,\n  isReply: PropTypes.bool,\n  verb: PropTypes.string.isRequired,\n  adaptiveCardFeatureState: PropTypes.string.isRequired,\n  sdkInstance: PropTypes.object.isRequired,\n  id: PropTypes.string.isRequired,\n  intl: PropTypes.object.isRequired\n};\n\nconst defaultProps = {\n  isAdditional: false,\n  isReply: false\n};\n\n/**\n * It will store the links and the names of the file and display them\n * as link components separated by commas\n * @param {Object} props\n * @returns {Object} Activity post Item\n */\nfunction createECMItemComponents(props) {\n  const links = [];\n  /* eslint-disable react/prop-types */\n  const {activity} = props;\n  let content = 'This ECM file is not supported';\n\n  if (activity.links && activity.links.items) {\n    for (const item of activity.links.items) {\n      links.push(`<a href=\"${item.sslr.loc}\">${item.displayName}</a>`);\n    }\n\n    content = activity.displayName\n      ? `${links.join('\\n')} \\n ${activity.displayName}`\n      : `${links.join('\\n')}`;\n  }\n\n  return (\n    <ActivityPost\n      content={content}\n      displayName={activity.displayName}\n      renderedComponent={activity.component}\n      {...props}\n    />\n  );\n  /* eslint-enable react/prop-types */\n}\n\nfunction ActivityItem(props) {\n  const {\n    activity,\n    isAdditional,\n    isReply,\n    verb,\n    adaptiveCardFeatureState,\n    sdkInstance,\n    id,\n    intl\n  } = props;\n\n  let itemComponent = '';\n  let shouldRenderAdaptiveCard = false;\n\n  if (Object.prototype.hasOwnProperty.call(activity, ACTIVITY_CARDS)) {\n    shouldRenderAdaptiveCard = hasAdaptiveCard(activity.cards, sdkInstance);\n  }\n  if (verb === POST_VERB) {\n    itemComponent = (\n      <ActivityPost\n        renderAdaptiveCard={(shouldRenderAdaptiveCard && adaptiveCardFeatureState === FEATURES_WIDGET_ADAPTIVE_CARD_ON\n          )}\n        cards={activity.cards}\n        content={activity.content}\n        displayName={activity.displayName}\n        renderedComponent={activity.component}\n        activityId={id}\n        intl={intl}\n        {...props}\n      />\n    );\n  }\n  else if (verb === SHARE_VERB) {\n    if (activity.contentCategory === LINKS_CONTENT_CATEGORY) {\n      // ECM files will be displayed as links for now\n      itemComponent = createECMItemComponents(props);\n    }\n    else {\n      itemComponent = (\n        <ActivityShareFiles\n          renderAdaptiveCard={(shouldRenderAdaptiveCard && adaptiveCardFeatureState === FEATURES_WIDGET_ADAPTIVE_CARD_ON\n          )}\n          cards={activity.cards}\n          activityId={id}\n          content={activity.content}\n          displayName={activity.displayName}\n          files={activity.files.items}\n          intl={intl}\n          {...props}\n        />\n      );\n    }\n  }\n  else if (SYSTEM_MESSAGE_VERBS.indexOf(verb) !== -1) {\n    itemComponent = <ActivitySystemMessage {...props} />;\n  }\n\n  const style = isReply ? styles.activityReplyItemContainer : styles.activityItemContainer;\n\n  return (\n    <div className={classNames('webex-activity-item-container', style, isAdditional ? styles.additional : '')}>\n      {itemComponent}\n    </div>\n  );\n}\n\nActivityItem.propTypes = propTypes;\nActivityItem.defaultProps = defaultProps;\n\nexport default ActivityItem;\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","POST_VERB","SHARE_VERB","LINKS_CONTENT_CATEGORY","propTypes","actor","PropTypes","shape","displayName","isRequired","activity","cards","array","component","element","contentCategory","string","content","files","items","arrayOf","image","url","thumbnail","mimeType","timestamp","isAdditional","bool","isReply","verb","adaptiveCardFeatureState","sdkInstance","object","id","intl","defaultProps","createECMItemComponents","props","links","item","push","sslr","loc","join","ActivityItem","itemComponent","shouldRenderAdaptiveCard","Object","prototype","hasOwnProperty","call","ACTIVITY_CARDS","hasAdaptiveCard","FEATURES_WIDGET_ADAPTIVE_CARD_ON","SYSTEM_MESSAGE_VERBS","indexOf","styles","activityReplyItemContainer","activityItemContainer","classNames","additional"],"mappings":"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"}