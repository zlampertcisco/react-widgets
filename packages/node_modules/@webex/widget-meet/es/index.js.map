{"version":3,"file":"index.js","sources":["../src/actions.js","../src/reducer.js","../../../../../node_modules/style-inject/dist/style-inject.es.js","../src/components/call-inactive/index.js","../src/components/call-active/index.js","../src/messages.js","../src/selector.js","../src/enhancers/withErrors.js","../src/enhancers/withWebRtcSupport.js","../src/events.js","../src/enhancers/withEventHandler.js","../src/enhancers/withCallHandlers.js","../src/enhancers/withDestinationType.js","../src/enhancers/withMeetDetails.js","../src/enhancers/index.js","../src/container.js","../src/translations/en.js","../src/index.js"],"sourcesContent":["export const UPDATE_LOCAL_VIDEO_POSITION = 'widget-meet/UPDATE_LOCAL_VIDEO_POSITION';\nexport const UPDATE_WIDGET_STATUS = 'widget-meet/UPDATE_WIDGET_STATUS';\nexport const STORE_MEET_DETAILS = 'widget-meet/STORE_MEET_DETAILS';\n\nexport function updateLocalVideoPosition(position) {\n  return {\n    type: UPDATE_LOCAL_VIDEO_POSITION,\n    payload: {\n      position\n    }\n  };\n}\n\nexport function updateWidgetStatus(status) {\n  return {\n    type: UPDATE_WIDGET_STATUS,\n    payload: {\n      status\n    }\n  };\n}\n\nexport function storeMeetDetails(details) {\n  return {\n    type: STORE_MEET_DETAILS,\n    payload: details\n  };\n}\n","import {combineReducers} from 'redux';\nimport {Record} from 'immutable';\nimport media from '@webex/redux-module-media';\nimport {reducer as notifications} from '@webex/react-container-notifications';\nimport avatar from '@webex/redux-module-avatar';\nimport mercury from '@webex/redux-module-mercury';\nimport spaces from '@webex/redux-module-spaces';\nimport activities from '@webex/redux-module-activities';\n\nimport {\n  STORE_MEET_DETAILS,\n  UPDATE_LOCAL_VIDEO_POSITION,\n  UPDATE_WIDGET_STATUS\n} from './actions';\n\nconst Status = Record({\n  hasOpenWithCall: false,\n  hasInitiatedCall: false // local user has clicked call button\n});\n\nconst VideoPosition = Record({\n  x: 0,\n  y: 0\n});\n\n/**\n * Note: We are storing the call object because services can take a long time to\n * return with a full locus object. If the call object exists in this store, it\n * will be used as a fallback if no others exist in the media store.\n */\n\nconst InitialState = Record({\n  toType: '', // valid types: userId, spaceId, email, sip, pstn\n  toValue: '', // sip address, uuid, email, phone number\n  callId: '', // id of call object in media store.\n  spaceId: '',\n  userId: '',\n  localVideoPosition: new VideoPosition(),\n  status: new Status()\n});\n\nexport const initialState = new InitialState();\n\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case STORE_MEET_DETAILS:\n      return state.merge(action.payload);\n    case UPDATE_LOCAL_VIDEO_POSITION:\n      return state.set('localVideoPosition', action.payload.position);\n    case UPDATE_WIDGET_STATUS:\n      return state.mergeIn(['status'], action.payload.status);\n\n    default:\n      return state;\n  }\n}\n\nexport const reducers = {\n  media,\n  avatar,\n  activities,\n  mercury,\n  notifications,\n  spaces,\n  widgetMeet: reducer\n};\n\nexport default combineReducers(reducers);\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport PresenceAvatar from '@webex/react-container-presence-avatar';\nimport ButtonControls from '@webex/react-component-button-controls';\n\nimport styles from './styles.css';\n\nconst propTypes = {\n  avatarId: PropTypes.string,\n  avatarImage: PropTypes.string,\n  callButtonAriaLabel: PropTypes.string,\n  callButtonLabel: PropTypes.string,\n  displayName: PropTypes.string,\n  onCallClick: PropTypes.func\n};\n\nconst defaultProps = {\n  avatarId: '',\n  avatarImage: '',\n  callButtonAriaLabel: 'Start Call',\n  callButtonLabel: 'Call',\n  displayName: 'Unknown',\n  onCallClick: () => {}\n};\n\n\nfunction InactiveCall({\n  avatarId,\n  avatarImage,\n  onCallClick,\n  callButtonAriaLabel,\n  callButtonLabel,\n  displayName\n}) {\n  const buttons = [\n    {\n      label: callButtonLabel,\n      accessibilityLabel: callButtonAriaLabel,\n      buttonClassName: styles.callButton,\n      buttonType: 'camera',\n      onClick: onCallClick\n    }\n  ];\n\n  return (\n    <div className={classNames(styles.callInactiveContainer, 'call-inactive-container')}>\n      <PresenceAvatar\n        avatarId={avatarId}\n        image={avatarImage}\n        name={displayName}\n        size={84}\n      />\n      <div className={classNames(styles.personName, 'call-person-name')}>\n        {displayName}\n      </div>\n      <div className={classNames(styles.callControls, 'call-controls-container')}>\n        <ButtonControls buttons={buttons} showLabels />\n      </div>\n    </div>\n  );\n}\n\nInactiveCall.propTypes = propTypes;\nInactiveCall.defaultProps = defaultProps;\n\nexport default InactiveCall;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\n\nimport {WebexInMeeting, WebexMeetingControls, WebexMeetingControl, WebexDataProvider} from '@webex/components';\n\nimport styles from './styles.css';\n\nconst ActiveMeeting = ({adapter, meetingId}) => (\n  <WebexDataProvider adapter={adapter}>\n    <div className={classNames(styles.callContainer, 'call-container')}>\n      <WebexMeetingControls className={styles.callControls} meetingID={meetingId}>\n        <WebexMeetingControl type=\"mute-audio\" />\n        <WebexMeetingControl type=\"mute-video\" />\n        <WebexMeetingControl type=\"leave-meeting\" />\n      </WebexMeetingControls>\n      <WebexInMeeting meetingID={meetingId} />\n    </div>\n  </WebexDataProvider>\n);\n\nActiveMeeting.propTypes = {\n  adapter: PropTypes.object.isRequired,\n  meetingId: PropTypes.string.isRequired\n};\n\nexport default ActiveMeeting;\n","/*\n * WidgetMeet Messages\n *\n * This contains all the text for the FeaturePage component.\n */\nimport {defineMessages} from 'react-intl';\n\nexport default defineMessages({\n  answerButtonLabel: {\n    id: 'ciscospark.container.meet.button.answer',\n    defaultMessage: 'Answer'\n  },\n  callButtonAriaLabel: {\n    id: 'ciscospark.container.meet.button.aria.call',\n    defaultMessage: 'Start Call'\n  },\n  callButtonLabel: {\n    id: 'ciscospark.container.meet.button.call',\n    defaultMessage: 'Call'\n  },\n  declineButtonLabel: {\n    id: 'ciscospark.container.meet.button.decline',\n    defaultMessage: 'Decline'\n  },\n  hangupButtonLabel: {\n    id: 'ciscospark.container.meet.button.hangup',\n    defaultMessage: 'Hangup'\n  },\n  okButtonLabel: {\n    id: 'ciscospark.container.meet.button.ok',\n    defaultMessage: 'Ok'\n  },\n  callErrorDeviceNotFound: {\n    id: 'ciscospark.container.meet.message.deviceNotFound',\n    defaultMessage: 'Webex cannot find your camera. Please check your browser settings, and that your camera is accessible, and try again.'\n  },\n  callErrorNotAllowed: {\n    id: 'ciscospark.container.meet.message.errorNotAllowed',\n    defaultMessage: 'Webex cannot access your camera. Please check your browser settings and try again.'\n  },\n  callErrorSecurity: {\n    id: 'ciscospark.container.meet.message.errorSecurity',\n    defaultMessage: 'Video Calling is supported on secure (HTTPS) sites only.'\n  },\n  callErrorUnknownMessage: {\n    id: 'ciscospark.container.meet.message.errorUnknown',\n    defaultMessage: 'Webex cannot connect your call. Please try again.'\n  },\n  callErrorBadToPropTitle: {\n    id: 'ciscospark.container.meet.message.errorBadToPropTitle',\n    defaultMessage: 'Invalid or missing details'\n  },\n  callErrorBadToPropMessage: {\n    id: 'ciscospark.container.meet.message.errorBadToPropMessage',\n    defaultMessage: 'Please provide a valid email address, user ID, SIP uri, space ID, or call object'\n  },\n  callPersonPrefix: {\n    id: 'ciscospark.container.meet.message.callPerson',\n    defaultMessage: 'Call'\n  },\n  incomingCallMessage: {\n    id: 'ciscospark.container.meet.message.incomingCall',\n    defaultMessage: 'Incoming call'\n  },\n  noWebRTCBrowserSupportMessage: {\n    id: 'ciscospark.container.meet.message.noWebRTCBrowserSupport',\n    defaultMessage: 'Video calling is not yet supported in your browser.'\n  },\n  useSupportedBrowserMessage: {\n    id: 'ciscospark.container.meet.message.useSupportedBrowser',\n    defaultMessage: 'For the best experience, use the latest version of Chrome or Firefox.'\n  }\n});\n","import {createSelector} from 'reselect';\n\nimport {validateAndDecodeId} from '@webex/react-component-utils';\n\nimport {destinationTypes} from './';\n\nconst getSDKAdapter = (state) => state.spark.get('adaptor');\nconst getWidget = (state) => state.widgetMeet;\nconst getCalls = (state) => state.media.byId;\nconst getAvatars = (state) => state.avatar;\nconst getUsers = (state) => state.users;\nconst getSpaces = (state) => state.spaces;\nconst getErrors = (state) => state.errors;\nconst getOwnProps = (state, ownProps) => ownProps;\n\nconst getCall = createSelector(\n  [getOwnProps, getCalls],\n  (ownProps, calls) => {\n    let call;\n\n    if (ownProps.call && ownProps.call?.instance) {\n      if (calls.has(ownProps.call.id)) {\n        call = calls.get(ownProps.call.id);\n      }\n      else {\n        ({call} = ownProps);\n      }\n    }\n\n    // Patching in activeParticipantsCount with devices to support sip should be migrated to sdk\n    if (call && call.instance && call.instance.locus && call.instance.locus.participants) {\n      const count = call.instance.locus.participants.reduce((acc, p) =>\n        acc + (p.state === 'JOINED' && p.type !== 'MEETING_BRIDGE' ? 1 : 0), 0);\n\n      call = call.set('activeParticipantsCount', count);\n    }\n\n    return call;\n  }\n);\n\nconst getMeeting = createSelector(\n  [getWidget, getSDKAdapter],\n  // eslint-disable-next-line arrow-body-style\n  (widget, sdkAdapter) => {\n    return widget.callId ? sdkAdapter.meetingsAdapter.datasource.meetings.getMeetingByType('id', widget.callId) : null;\n  }\n);\n\nconst getAvatarImage = createSelector(\n  [getOwnProps, getAvatars, getWidget, getUsers],\n  (ownProps, avatars, widget, users) => {\n    const {\n      toValue,\n      toType\n    } = widget;\n\n    let avatarId;\n\n    if (toType === destinationTypes.EMAIL) {\n      avatarId = users.getIn(['byEmail', toValue]);\n    }\n    else if ([destinationTypes.EMAIL, destinationTypes.USERID, destinationTypes.SPACEID].includes(toType)) {\n      avatarId = toValue;\n    }\n\n    return avatars.getIn(['items', avatarId]);\n  }\n);\n\nconst getDisplayName = createSelector(\n  [getOwnProps, getWidget, getUsers, getSpaces],\n  (ownProps, widget, users, spaces) => {\n    const {\n      toValue,\n      toType\n    } = widget;\n\n    switch (toType) {\n      case destinationTypes.SIP:\n      case destinationTypes.PSTN:\n        return toValue;\n      case destinationTypes.EMAIL: {\n        const userId = users.getIn(['byEmail', toValue]);\n\n        return users.getIn(['byId', userId, 'displayName']);\n      }\n      case destinationTypes.USERID:\n        return users.getIn(['byId', toValue, 'displayName']);\n      case destinationTypes.SPACEID:\n        if (ownProps.spaceDetails.type === 'direct') {\n          return ownProps.spaceDetails.title;\n        }\n\n        return spaces.getIn(['byId', validateAndDecodeId(toValue).id, 'displayName']);\n      default:\n        return '';\n    }\n  }\n);\n\nconst getMeetWidgetError = createSelector(\n  [getErrors], (errors) => errors.get('errors').first()\n);\n\nconst isInState = (states = []) => (call) =>\n  states.find((state) => call?.instance?.state === state);\nconst isOut = isInState(['DECLINED', 'LEFT']);\nconst isAnswered = isInState(['JOINED']);\n\nconst getMeetWidgetProps = createSelector(\n  [\n    getAvatarImage,\n    getWidget,\n    getCall,\n    getDisplayName,\n    getMeetWidgetError,\n    getSDKAdapter,\n    getMeeting\n  ],\n  (avatarImage, widgetMeet, call, displayName, error, sdkAdapter, meeting) => {\n    const props = {\n      avatarImage,\n      displayName,\n      call,\n      widgetMeet,\n      error,\n      localVideoPosition: widgetMeet.localVideoPosition,\n      hasVideo: widgetMeet.toType !== destinationTypes.PSTN,\n      sdkAdapter,\n      meeting\n    };\n\n    let callProps;\n\n    if (call) {\n      // Is the call active?\n      const {\n        direction,\n        isConnected,\n        hasJoinedOnThisDevice,\n        isRinging,\n        localMediaStream,\n        isCall,\n        isSendingVideo\n      } = call;\n      const validCall = !!call.instance.state;\n\n      callProps = {\n        isRinging,\n        isCall,\n        callInstance: call.instance,\n        isActive: isConnected && hasJoinedOnThisDevice || direction === 'out',\n        isIncoming: validCall && direction === 'in' && !hasJoinedOnThisDevice && !isOut(call) && !isAnswered(call)\n      };\n      props.hasLocalVideo = localMediaStream && localMediaStream.active && isSendingVideo;\n    }\n\n    return {\n      ...props,\n      ...callProps\n    };\n  }\n);\n\nexport default getMeetWidgetProps;\n","import {connect} from 'react-redux';\nimport {compose, lifecycle} from 'recompose';\nimport {bindActionCreators} from 'redux';\nimport {addError, removeError} from '@webex/redux-module-errors';\n\nimport messages from '../messages';\n\n\nexport default compose(\n  connect(\n    (state) => state,\n    (dispatch) => bindActionCreators({\n      addError,\n      removeError\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillMount() {\n      const {\n        call,\n        destination,\n        intl\n      } = this.props;\n\n      if (!call && (!destination || destination && !destination.id || !destination.type)) {\n        const {formatMessage} = intl;\n\n        this.props.addError({\n          id: 'widgetMeet.to',\n          displayTitle: formatMessage(messages.callErrorBadToPropTitle),\n          displaySubtitle: formatMessage(messages.callErrorBadToPropMessage),\n          temporary: false\n        });\n      }\n    },\n    componentWillReceiveProps({\n      call\n    }) {\n      if (call && call.error && !this.props.error) {\n        // Call has an error\n        this.props.catchCallError(call.error);\n        this.props.handleHangup();\n      }\n    }\n  })\n);\n","import React from 'react';\nimport classNames from 'classnames';\nimport {shape, func} from 'prop-types';\nimport {\n  branch,\n  renderComponent\n} from 'recompose';\n\nimport messages from '../messages';\nimport styles from '../styles.css';\n\nfunction NoWebRTCSupport({intl}) {\n  return (\n    <div className={classNames(styles.meetWidgetContainer, styles.noWebRtc, 'meet-widget-container')}>\n      <div className={styles.noWebRtcMessage}>\n        <p>{intl.formatMessage(messages.noWebRTCBrowserSupportMessage)}</p>\n        <p>{intl.formatMessage(messages.useSupportedBrowserMessage)}</p>\n      </div>\n    </div>\n  );\n}\n\nNoWebRTCSupport.propTypes = {\n  // Grabbed from https://github.com/sharetribe/ftw-daily/blob/master/src/util/reactIntl.js#L10\n  intl: shape({\n    formatDate: func.isRequired,\n    formatHTMLMessage: func.isRequired,\n    formatMessage: func.isRequired,\n    formatNumber: func.isRequired,\n    formatPlural: func.isRequired,\n    formatRelativeTime: func.isRequired,\n    formatTime: func.isRequired\n  }).isRequired\n};\n\nconst isNotSupported = ({media}) =>\n  media.getIn(['webRTC', 'hasCheckedSupport']) &&\n  !media.getIn(['webRTC', 'isSupported']);\n\nexport default branch(\n  isNotSupported,\n  renderComponent(NoWebRTCSupport)\n);\n","import {constructHydraId, hydraTypes} from '@webex/react-component-utils';\n\nexport const eventNames = {\n  CALLS_CREATED: 'calls:created',\n  CALLS_CONNECTED: 'calls:connected',\n  CALLS_DISCONNECTED: 'calls:disconnected',\n  MEMBERSHIPS_NOTIFIED: 'memberships:notified',\n  MEMBERSHIPS_CONNECTED: 'memberships:connected',\n  MEMBERSHIPS_DECLINED: 'memberships:declined',\n  MEMBERSHIPS_DISCONNECTED: 'memberships:disconnected'\n};\n\n/**\n * Creates an event data object for DOM and event hooks\n *\n * @export\n * @param {Object} call\n * @param {Object} actor\n * @param {String} spaceId\n * @returns {Object}\n */\nexport function constructCallEventData({callInstance, actor}) {\n  let personDetails = {};\n\n  if (actor) {\n    personDetails = {\n      actorId: constructHydraId(hydraTypes.PEOPLE, actor.id),\n      actorName: actor.name,\n      personId: constructHydraId(hydraTypes.PEOPLE, actor.id),\n      personEmail: actor.email\n    };\n  }\n\n  if (callInstance && callInstance.locus) {\n    const {locus} = callInstance;\n    const conversationId = locus.conversationUrl.split('/');\n    const {host} = locus;\n\n    if (host) {\n      personDetails.actorId = constructHydraId(hydraTypes.PEOPLE, host.id);\n      personDetails.actorName = host.name;\n      personDetails.personEmail = host.email;\n      personDetails.personId = constructHydraId(hydraTypes.PEOPLE, host.id);\n    }\n    if (conversationId) {\n      personDetails.roomId = constructHydraId(hydraTypes.ROOM, conversationId);\n    }\n  }\n\n  return {\n    ...personDetails,\n    call: callInstance\n  };\n}\n","import {compose, withHandlers, lifecycle} from 'recompose';\n\nimport {\n  constructCallEventData,\n  eventNames as defaultEventNames\n} from '../events';\n\nfunction handleEvent(props) {\n  return (name, data) => {\n    const {onEvent} = props;\n\n    if (typeof onEvent === 'function') {\n      onEvent(name, data);\n    }\n  };\n}\n\nexport default compose(\n  withHandlers({handleEvent}),\n  lifecycle({\n    componentDidMount() {\n      this.eventNames = Object.assign({}, defaultEventNames, this.props.eventNames);\n    },\n    componentWillReceiveProps(nextProps) {\n      const {\n        currentUser,\n        call,\n        callInstance\n      } = nextProps;\n      const prevCall = this.props.call;\n\n      try {\n        if (call) {\n          // Check if this is a new initiated call\n          if (call.isInitiated && (!prevCall || !prevCall.isInitiated)) {\n            // Emit the event\n            nextProps.handleEvent(\n              this.eventNames.CALLS_CREATED,\n              constructCallEventData({\n                callInstance\n              })\n            );\n          }\n\n          if (call.isConnected && !prevCall.isConnected) {\n            // New call is connected, emit event\n            nextProps.handleEvent(\n              this.eventNames.CALLS_CONNECTED,\n              constructCallEventData({\n                callInstance\n              })\n            );\n          }\n        }\n\n        if (!call && prevCall) {\n          nextProps.handleEvent(\n            this.eventNames.CALLS_DISCONNECTED,\n            constructCallEventData({\n              callInstance: prevCall.instance,\n              actor: currentUser\n            })\n          );\n        }\n      }\n      catch (e) {\n        // Do nothing\n      }\n    }\n  })\n);\n","import {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {compose, lifecycle, withHandlers} from 'recompose';\n\nimport {\n  acceptIncomingCall,\n  placeCall,\n  declineIncomingCall,\n  hangupCall\n} from '@webex/redux-module-media';\nimport {createNotification} from '@webex/react-container-notifications';\nimport {addError, removeError} from '@webex/redux-module-errors';\nimport {constructHydraId, hydraTypes} from '@webex/react-component-utils';\n\nimport messages from '../messages';\nimport {\n  updateWidgetStatus,\n  storeMeetDetails\n} from '../actions';\n\nimport {destinationTypes} from '../';\n\n\n/**\n * Catches a call error and creates a system error\n * @param {*} props\n * @param {Object} props.call expects to have a call object\n * @param {Object} props.call.error call should have an error to process\n * @returns {Function} a recompose handler\n */\nfunction catchCallError(props) {\n  return () => {\n    const error = props.call.error || {};\n    const callErrorId = 'spark.call';\n    const {formatMessage} = props.intl;\n    const actionTitle = formatMessage(messages.okButtonLabel);\n    let displayTitle;\n    let displaySubtitle;\n\n    switch (error.name) {\n      case 'DevicesNotFoundError':\n        displayTitle = formatMessage(messages.callErrorDeviceNotFound);\n        break;\n      case 'NotAllowedError':\n        displayTitle = formatMessage(messages.callErrorNotAllowed);\n        break;\n      case 'SecurityError':\n        displayTitle = formatMessage(messages.callErrorSecurity);\n        break;\n      default:\n        displayTitle = formatMessage(messages.callErrorUnknownMessage);\n        displaySubtitle = `(${error.name} ${error.message})`;\n    }\n    props.addError({\n      actionTitle,\n      code: error.name,\n      id: callErrorId,\n      displayTitle,\n      displaySubtitle,\n      onAction: () => props.removeError(callErrorId),\n      temporary: true\n    });\n  };\n}\n\nfunction handleAnswer(props) {\n  const cleanUp = () => props.updateWidgetStatus({hasInitiatedCall: false});\n\n  return () => {\n    const {call, sdkAdapter, destinationId} = props;\n\n    props.updateWidgetStatus({hasInitiatedCall: true});\n    props.acceptIncomingCall(call, {sdkAdapter, destinationId, cleanUp})\n      .then(({id: callId}) => props.storeMeetDetails({callId}));\n  };\n}\n\nfunction handleDecline(props) {\n  return () => {\n    const {call, sdkAdapter} = props;\n\n    props.declineIncomingCall(call, sdkAdapter);\n  };\n}\n\nfunction handleHangup(props) {\n  return () => {\n    const {\n      call\n    } = props;\n\n    props.hangupCall({call: call.instance, id: call.id});\n  };\n}\n\nfunction handleCall(props) {\n  const cleanUp = () => props.updateWidgetStatus({hasInitiatedCall: false});\n\n  return () => {\n    const {\n      sdkAdapter,\n      widgetMeet\n    } = props;\n    const {\n      toType,\n      toValue\n    } = widgetMeet;\n\n    let destination = toValue;\n    const callOptions = {\n      constraints: {\n        audio: true,\n        video: true\n      },\n      offerOptions: {\n        offerToReceiveVideo: true,\n        offerToReceiveAudio: true\n      }\n    };\n\n    switch (toType) {\n      case destinationTypes.USERID:\n        destination = constructHydraId(hydraTypes.PEOPLE, toValue);\n        break;\n      case destinationTypes.SPACEID:\n        destination = toValue;\n        break;\n      case destinationTypes.PSTN:\n        callOptions.constraints.video = false;\n        callOptions.offerOptions.offerToReceiveVideo = false;\n        break;\n      default:\n        break;\n    }\n    props.updateWidgetStatus({hasInitiatedCall: true});\n    props.placeCall(sdkAdapter, {destination, options: callOptions, cleanUp})\n      .then(({id}) => {\n        props.storeMeetDetails({callId: id});\n      });\n  };\n}\n\nfunction handleCallNotification(props) {\n  return (incomingCall, fromPersonName) => {\n    const {\n      intl,\n      avatarImage\n    } = props;\n    const {formatMessage} = intl;\n    const details = {\n      username: fromPersonName,\n      message: formatMessage(messages.incomingCallMessage),\n      avatar: avatarImage\n    };\n\n    props.createNotification(incomingCall.id, details);\n  };\n}\n\nexport default compose(\n  connect(\n    null,\n    (dispatch) => bindActionCreators({\n      createNotification,\n      acceptIncomingCall,\n      declineIncomingCall,\n      placeCall,\n      hangupCall,\n      updateWidgetStatus,\n      storeMeetDetails,\n      addError,\n      removeError\n    }, dispatch)\n  ),\n  withHandlers({\n    handleAnswer,\n    handleDecline,\n    handleHangup,\n    handleCall,\n    handleCallNotification,\n    catchCallError\n  }),\n  lifecycle({\n    componentWillReceiveProps(nextProps) {\n      const {\n        call,\n        displayName,\n        widgetMeet,\n        currentUser,\n        startCall,\n        isIncoming\n      } = nextProps;\n\n      if (call) {\n        const prevCall = this.props.call;\n\n        // Check if this is a new initiated call and is incoming\n        if (\n          call.isInitiated &&\n          (!prevCall || !prevCall.isInitiated) &&\n          isIncoming\n        ) {\n          nextProps.handleCallNotification(call, displayName);\n        }\n      }\n\n      if (\n        (widgetMeet.toValue || call) && currentUser && !widgetMeet.status.hasOpenWithCall\n        && (startCall === true || startCall === '' || startCall === 'true')\n      ) {\n        nextProps.updateWidgetStatus({hasOpenWithCall: true});\n        nextProps.handleCall();\n      }\n    },\n    componentWillUnmount() {\n      if (this.props.isActive) {\n        this.props.handleHangup();\n      }\n    }\n  })\n);\n","import {compose, lifecycle} from 'recompose';\nimport {bindActionCreators} from 'redux';\nimport {connect} from 'react-redux';\nimport {deconstructHydraId} from '@webex/react-component-utils';\n\nimport {storeMeetDetails} from '../actions';\n\nimport {destinationTypes} from '../';\n\nfunction storeDestinationType(props) {\n  const {\n    destination,\n    call\n  } = props;\n  const details = {};\n\n  if (destination && !call) {\n    let toValue = destination.id;\n\n    // Normalize To values and store\n    switch (destination.type) {\n      case destinationTypes.SIP:\n        toValue = toValue.replace('sip:', '');\n        break;\n      case destinationTypes.USERID:\n        {\n          const hydraObject = deconstructHydraId(toValue);\n\n          toValue = hydraObject.id;\n        }\n        break;\n      default:\n        break;\n    }\n\n    details.toType = destination.type;\n    details.toValue = toValue;\n\n    props.storeMeetDetails(details);\n  }\n}\n\nexport default compose(\n  connect(\n    null,\n    (dispatch) => bindActionCreators({\n      storeMeetDetails\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillMount() {\n      storeDestinationType(this.props);\n    }\n  })\n);\n","import {compose, lifecycle} from 'recompose';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {fetchSpace} from '@webex/redux-module-spaces';\nimport {getUser} from '@webex/redux-module-users';\nimport {fetchAvatar} from '@webex/redux-module-avatar';\nimport {validateAndDecodeId} from '@webex/react-component-utils';\n\nimport {storeMeetDetails} from '../actions';\n\nimport {destinationTypes} from '../';\n\nfunction getCallDetails(props) {\n  const {\n    sparkInstance,\n    avatar,\n    spaces,\n    users,\n    currentUser,\n    widgetMeet,\n    media\n  } = props;\n\n  const {toType, toValue} = widgetMeet;\n\n  switch (toType) {\n    case destinationTypes.EMAIL:\n      if (!users.getIn(['byEmail', toValue])) {\n        props.getUser({email: toValue}, sparkInstance);\n      }\n      break;\n    case destinationTypes.USERID:\n      if (!users.getIn(['byId', toValue])) {\n        props.getUser({id: toValue}, sparkInstance);\n      }\n      break;\n    case destinationTypes.SPACEID:\n      {\n        const spaceShell = validateAndDecodeId(toValue);\n        const space = spaces.getIn(['byId', spaceShell.id]);\n\n        if (!space) {\n          props.fetchSpace(sparkInstance, spaceShell)\n            .then((s) => {\n              if (s && s.locusUrl) {\n                props.storeMeetDetails({callId: media.getIn(['byLocusUrl', s.locusUrl])});\n              }\n            });\n        }\n        else if (!space.isFetching\n          && !avatar.hasIn(['items', space.id]) && !avatar.hasIn(['avatarsInFlight', space.id])\n        ) {\n          const otherUser = space.participants.find((p) => p !== currentUser.id);\n\n          if (space.type !== 'direct'\n            || (!avatar.hasIn(['items', otherUser]) && !avatar.hasIn(['avatarsInFlight', otherUser]))) {\n            props.fetchAvatar({space, userId: otherUser}, sparkInstance);\n          }\n        }\n      }\n      break;\n    default:\n  }\n}\n\nexport default compose(\n  connect(\n    null,\n    (dispatch) => bindActionCreators({\n      fetchSpace,\n      fetchAvatar,\n      storeMeetDetails,\n      getUser\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillReceiveProps(nextProps) {\n      // check to see if we have gotten currentUser and device is registered\n      if (nextProps.currentUser) {\n        getCallDetails(nextProps);\n      }\n    }\n  })\n);\n","import {setDisplayName, compose} from 'recompose';\n\nimport withErrors from './withErrors';\nimport withWebRtcSupport from './withWebRtcSupport';\nimport withEventHandler from './withEventHandler';\nimport withCallHandlers from './withCallHandlers';\nimport withDestinationType from './withDestinationType';\nimport withMeetDetails from './withMeetDetails';\n\nexport default compose(\n  setDisplayName('WidgetMeetEnhancers'),\n  withEventHandler,\n  withDestinationType,\n  withMeetDetails,\n  withCallHandlers,\n  withErrors,\n  withWebRtcSupport\n);\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport classNames from 'classnames';\nimport {compose} from 'recompose';\n\nimport Ringtone, {\n  RINGTONE_TYPE_RINGBACK,\n  RINGTONE_TYPE_INCOMING\n} from '@webex/react-component-ringtone';\nimport LoadingScreen from '@webex/react-component-loading-screen';\nimport Notifications from '@webex/react-container-notifications';\nimport IncomingCall from '@webex/react-component-incoming-call';\n\nimport '@webex/components/dist/css/webex-components.css';\n\nimport InactiveCall from './components/call-inactive';\nimport ActiveMeeting from './components/call-active';\n\n\nimport messages from './messages';\nimport styles from './styles.css';\nimport getMeetWidgetProps from './selector';\nimport enhancers from './enhancers';\n\nconst injectedPropTypes = {\n  avatarId: PropTypes.string,\n  avatarImage: PropTypes.string,\n  displayName: PropTypes.string,\n  call: PropTypes.object,\n  meeting: PropTypes.object,\n  widgetMeet: PropTypes.object.isRequired\n};\n\nexport const ownPropTypes = {\n  call: PropTypes.object,\n  destination: PropTypes.shape({\n    id: PropTypes.string.isRequired,\n    type: PropTypes.oneOf(['email', 'spaceId', 'userId', 'sip', 'pstn'])\n  }).isRequired,\n  eventNames: PropTypes.object,\n  muteNotifications: PropTypes.bool,\n  onEvent: PropTypes.func,\n  startCall: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.bool\n  ])\n};\n\nexport class MeetWidget extends Component {\n  constructor() {\n    super();\n    this.state = {};\n  }\n\n  shouldComponentUpdate(nextProps) {\n    return nextProps !== this.props;\n  }\n\n  render() {\n    const {\n      intl,\n      displayName,\n      isIncoming,\n      avatarImage,\n      meeting,\n      widgetMeet,\n      sdkAdapter\n    } = this.props;\n    const {formatMessage} = intl;\n    const {avatarId} = this.props.spaceDetails;\n\n    if (displayName && sdkAdapter) {\n      // Is this an incoming call?\n      if (isIncoming) {\n        const {\n          handleAnswer,\n          handleDecline\n        } = this.props;\n\n        return (\n          <div className={classNames(styles.meetWidgetContainer, 'meet-widget-container')}>\n            <IncomingCall\n              answerButtonLabel={formatMessage(messages.answerButtonLabel)}\n              avatarId={avatarId}\n              avatarImage={avatarImage}\n              declineButtonLabel={formatMessage(messages.declineButtonLabel)}\n              displayName={displayName}\n              incomingCallMessage={formatMessage(messages.incomingCallMessage)}\n              onAnswerClick={handleAnswer}\n              onDeclineClick={handleDecline}\n            />\n            <Ringtone play type={RINGTONE_TYPE_INCOMING} />\n            <Notifications onEvent={this.props.handleEvent} isMuted={this.props.muteNotifications} />\n          </div>\n        );\n      }\n\n      // Is the call active?\n      if (meeting && (meeting.meetingFiniteStateMachine.is('JOINED') || widgetMeet.status.hasInitiatedCall)) {\n        return (\n          <div className={classNames(styles.meetWidgetContainer, 'meet-widget-container')}>\n            <ActiveMeeting adapter={sdkAdapter} meetingId={meeting.id} />\n            <Ringtone play={status.isRinging} type={RINGTONE_TYPE_RINGBACK} />\n          </div>\n        );\n      }\n\n      if (widgetMeet.status.hasInitiatedCall) {\n        return <LoadingScreen />;\n      }\n\n      return (\n        <div className={classNames(styles.meetWidgetContainer, 'meet-widget-container')}>\n          <InactiveCall\n            avatarId={avatarId}\n            avatarImage={avatarImage}\n            callButtonAriaLabel={formatMessage(messages.callButtonAriaLabel)}\n            callButtonLabel={formatMessage(messages.callButtonLabel)}\n            displayName={displayName}\n            onCallClick={this.props.handleCall}\n          />\n          <Notifications onEvent={this.props.handleEvent} isMuted={this.props.muteNotifications} />\n        </div>\n      );\n    }\n\n    return <LoadingScreen />;\n  }\n}\n\n\nMeetWidget.propTypes = {\n  ...ownPropTypes,\n  ...injectedPropTypes\n};\n\n\nexport default compose(\n  connect(\n    getMeetWidgetProps\n  ),\n  enhancers\n)(MeetWidget);\n","export default {\n};\n","import {compose} from 'recompose';\nimport {constructWebexEnhancer, withIntl} from '@webex/webex-widget-base';\nimport {enhancer as mercuryEnhancer} from '@webex/redux-module-mercury';\nimport {enhancer as mediaEnhancer} from '@webex/redux-module-media';\n\nimport {reducers} from './reducer';\nimport ConnectedMeet from './container';\n\nimport messages from './translations/en';\n\nexport {reducers};\n\nexport const destinationTypes = {\n  SIP: 'sip',\n  EMAIL: 'email',\n  USERID: 'userId',\n  SPACEID: 'spaceId',\n  PSTN: 'pstn'\n};\n\nexport default compose(\n  constructWebexEnhancer({\n    name: 'meet',\n    reducers\n  }),\n  withIntl({locale: 'en', messages}),\n  mediaEnhancer,\n  mercuryEnhancer\n)(ConnectedMeet);\n"],"names":["UPDATE_LOCAL_VIDEO_POSITION","UPDATE_WIDGET_STATUS","STORE_MEET_DETAILS","updateWidgetStatus","status","type","payload","storeMeetDetails","details","Status","Record","hasOpenWithCall","hasInitiatedCall","VideoPosition","x","y","InitialState","toType","toValue","callId","spaceId","userId","localVideoPosition","initialState","reducer","state","action","merge","set","position","mergeIn","reducers","media","avatar","activities","mercury","notifications","spaces","widgetMeet","combineReducers","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","propTypes","avatarId","PropTypes","string","avatarImage","callButtonAriaLabel","callButtonLabel","displayName","onCallClick","func","defaultProps","InactiveCall","buttons","label","accessibilityLabel","buttonClassName","styles","callButton","buttonType","onClick","classNames","callInactiveContainer","personName","callControls","ActiveMeeting","adapter","meetingId","callContainer","object","isRequired","defineMessages","answerButtonLabel","id","defaultMessage","declineButtonLabel","hangupButtonLabel","okButtonLabel","callErrorDeviceNotFound","callErrorNotAllowed","callErrorSecurity","callErrorUnknownMessage","callErrorBadToPropTitle","callErrorBadToPropMessage","callPersonPrefix","incomingCallMessage","noWebRTCBrowserSupportMessage","useSupportedBrowserMessage","getSDKAdapter","spark","get","getWidget","getCalls","byId","getAvatars","getUsers","users","getSpaces","getErrors","errors","getOwnProps","ownProps","getCall","createSelector","calls","call","instance","has","locus","participants","count","reduce","acc","p","getMeeting","widget","sdkAdapter","meetingsAdapter","datasource","meetings","getMeetingByType","getAvatarImage","avatars","destinationTypes","EMAIL","getIn","USERID","SPACEID","includes","getDisplayName","SIP","PSTN","spaceDetails","title","validateAndDecodeId","getMeetWidgetError","first","isInState","states","find","isOut","isAnswered","getMeetWidgetProps","error","meeting","props","hasVideo","callProps","direction","isConnected","hasJoinedOnThisDevice","isRinging","localMediaStream","isCall","isSendingVideo","validCall","callInstance","isActive","isIncoming","hasLocalVideo","active","compose","connect","dispatch","bindActionCreators","addError","removeError","lifecycle","componentWillMount","destination","intl","formatMessage","displayTitle","messages","displaySubtitle","temporary","componentWillReceiveProps","catchCallError","handleHangup","NoWebRTCSupport","meetWidgetContainer","noWebRtc","noWebRtcMessage","shape","formatDate","formatHTMLMessage","formatNumber","formatPlural","formatRelativeTime","formatTime","isNotSupported","branch","renderComponent","eventNames","CALLS_CREATED","CALLS_CONNECTED","CALLS_DISCONNECTED","MEMBERSHIPS_NOTIFIED","MEMBERSHIPS_CONNECTED","MEMBERSHIPS_DECLINED","MEMBERSHIPS_DISCONNECTED","constructCallEventData","actor","personDetails","actorId","constructHydraId","hydraTypes","PEOPLE","actorName","name","personId","personEmail","email","conversationId","conversationUrl","split","host","roomId","ROOM","handleEvent","data","onEvent","withHandlers","componentDidMount","Object","assign","defaultEventNames","nextProps","currentUser","prevCall","isInitiated","e","callErrorId","actionTitle","message","code","onAction","handleAnswer","cleanUp","destinationId","acceptIncomingCall","then","handleDecline","declineIncomingCall","hangupCall","handleCall","callOptions","constraints","audio","video","offerOptions","offerToReceiveVideo","offerToReceiveAudio","placeCall","options","handleCallNotification","incomingCall","fromPersonName","username","createNotification","startCall","componentWillUnmount","storeDestinationType","replace","hydraObject","deconstructHydraId","getCallDetails","sparkInstance","getUser","spaceShell","space","fetchSpace","s","locusUrl","isFetching","hasIn","otherUser","fetchAvatar","setDisplayName","withEventHandler","withDestinationType","withMeetDetails","withCallHandlers","withErrors","withWebRtcSupport","injectedPropTypes","ownPropTypes","oneOf","muteNotifications","bool","oneOfType","MeetWidget","Component","constructor","shouldComponentUpdate","render","RINGTONE_TYPE_INCOMING","meetingFiniteStateMachine","is","RINGTONE_TYPE_RINGBACK","enhancers","constructWebexEnhancer","withIntl","locale","mediaEnhancer","mercuryEnhancer","ConnectedMeet"],"mappings":"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"}