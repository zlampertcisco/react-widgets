{"version":3,"file":"index.js","sources":["../src/selectors.js","../src/reducer.js","../src/index.js"],"sourcesContent":["import {createSelector} from 'reselect';\nimport moment from 'moment';\n\nconst getAvatars = (state) => state.avatar.get('items').toJS();\nconst getPresence = (state) => state.presence.get('items').toJS();\nconst getProps = (state, props) => props;\n\nconst getAvatarProps = createSelector(\n  [getAvatars, getPresence, getProps],\n  (avatars, presence, props) => {\n    const image = props.image || avatars[props.avatarId];\n    // Allow user to override the avatar image, otherwise get it from the store\n    const userPresence = presence[props.avatarId];\n    let presenceStatus;\n\n    if (userPresence) {\n      presenceStatus = userPresence.status;\n      if (userPresence.status === 'inactive' && userPresence.lastActive) {\n        // Users are actually only 'inactive' after lastActive is > 24 hours\n        const lastActive = moment(userPresence.lastActive);\n        const now = moment();\n\n        if (now.diff(lastActive, 'hours') < 24) {\n          // User is in limbo, not active and not inactive\n          presenceStatus = undefined;\n        }\n      }\n    }\n\n    return {\n      image,\n      presenceStatus\n    };\n  }\n);\n\nexport default getAvatarProps;\n","import {combineReducers} from 'redux';\n\nimport avatar from '@webex/redux-module-avatar';\nimport presence from '@webex/redux-module-presence';\n\nexport const reducers = {\n  avatar,\n  presence\n};\n\nexport default combineReducers(reducers);\n","\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport PresenceAvatar from '@webex/react-component-presence-avatar';\n\nimport getAvatarProps from './selectors';\nimport reducers from './reducer';\n\nfunction mapStateToProps(state, props) {\n  const {image, presenceStatus} = getAvatarProps(state, props);\n\n  return Object.assign({}, props, {\n    image,\n    presenceStatus\n  });\n}\n\nconst ConnectedPresenceAvatar = connect(\n  mapStateToProps\n)(PresenceAvatar);\n\nPresenceAvatar.propTypes = {\n  avatarId: PropTypes.string,\n  baseColor: PropTypes.string,\n  iconSize: PropTypes.string,\n  image: PropTypes.string,\n  isSelfAvatar: PropTypes.bool,\n  name: PropTypes.string,\n  onClick: PropTypes.func,\n  presenceStatus: PropTypes.string\n};\n\nexport default ConnectedPresenceAvatar;\n\nexport {reducers};\n"],"names":["getAvatars","state","avatar","get","toJS","getPresence","presence","getProps","props","getAvatarProps","createSelector","avatars","image","avatarId","userPresence","presenceStatus","status","lastActive","moment","now","diff","undefined","reducers","combineReducers","mapStateToProps","Object","assign","ConnectedPresenceAvatar","connect","PresenceAvatar","propTypes","PropTypes","string","baseColor","iconSize","isSelfAvatar","bool","name","onClick","func"],"mappings":";;;;;;;;;AAGA,MAAMA,UAAU,GAAIC,KAAD,IAAWA,KAAK,CAACC,MAAN,CAAaC,GAAb,CAAiB,OAAjB,EAA0BC,IAA1B,EAA9B;;AACA,MAAMC,WAAW,GAAIJ,KAAD,IAAWA,KAAK,CAACK,QAAN,CAAeH,GAAf,CAAmB,OAAnB,EAA4BC,IAA5B,EAA/B;;AACA,MAAMG,QAAQ,GAAG,CAACN,KAAD,EAAQO,KAAR,KAAkBA,KAAnC;;AAEA,MAAMC,cAAc,GAAGC,cAAc,CACnC,CAACV,UAAD,EAAaK,WAAb,EAA0BE,QAA1B,CADmC,EAEnC,CAACI,OAAD,EAAUL,QAAV,EAAoBE,KAApB,KAA8B;AAC5B,QAAMI,KAAK,GAAGJ,KAAK,CAACI,KAAN,IAAeD,OAAO,CAACH,KAAK,CAACK,QAAP,CAApC,CAD4B;;AAG5B,QAAMC,YAAY,GAAGR,QAAQ,CAACE,KAAK,CAACK,QAAP,CAA7B;AACA,MAAIE,cAAJ;;AAEA,MAAID,YAAJ,EAAkB;AAChBC,IAAAA,cAAc,GAAGD,YAAY,CAACE,MAA9B;;AACA,QAAIF,YAAY,CAACE,MAAb,KAAwB,UAAxB,IAAsCF,YAAY,CAACG,UAAvD,EAAmE;AACjE;AACA,YAAMA,UAAU,GAAGC,MAAM,CAACJ,YAAY,CAACG,UAAd,CAAzB;AACA,YAAME,GAAG,GAAGD,MAAM,EAAlB;;AAEA,UAAIC,GAAG,CAACC,IAAJ,CAASH,UAAT,EAAqB,OAArB,IAAgC,EAApC,EAAwC;AACtC;AACAF,QAAAA,cAAc,GAAGM,SAAjB;AACD;AACF;AACF;;AAED,SAAO;AACLT,IAAAA,KADK;AAELG,IAAAA;AAFK,GAAP;AAID,CA1BkC,CAArC;;ACFO,MAAMO,QAAQ,GAAG;AACtBpB,EAAAA,MADsB;AAEtBI,EAAAA;AAFsB,CAAjB;AAKP,cAAeiB,eAAe,CAACD,QAAD,CAA9B;;ACFA,SAASE,eAAT,CAAyBvB,KAAzB,EAAgCO,KAAhC,EAAuC;AACrC,QAAM;AAACI,IAAAA,KAAD;AAAQG,IAAAA;AAAR,MAA0BN,cAAc,CAACR,KAAD,EAAQO,KAAR,CAA9C;AAEA,SAAOiB,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBlB,KAAlB,EAAyB;AAC9BI,IAAAA,KAD8B;AAE9BG,IAAAA;AAF8B,GAAzB,CAAP;AAID;;MAEKY,uBAAuB,GAAGC,OAAO,CACrCJ,eADqC,CAAP,CAE9BK,cAF8B;AAIhCA,cAAc,CAACC,SAAf,GAA2B;AACzBjB,EAAAA,QAAQ,EAAEkB,SAAS,CAACC,MADK;AAEzBC,EAAAA,SAAS,EAAEF,SAAS,CAACC,MAFI;AAGzBE,EAAAA,QAAQ,EAAEH,SAAS,CAACC,MAHK;AAIzBpB,EAAAA,KAAK,EAAEmB,SAAS,CAACC,MAJQ;AAKzBG,EAAAA,YAAY,EAAEJ,SAAS,CAACK,IALC;AAMzBC,EAAAA,IAAI,EAAEN,SAAS,CAACC,MANS;AAOzBM,EAAAA,OAAO,EAAEP,SAAS,CAACQ,IAPM;AAQzBxB,EAAAA,cAAc,EAAEgB,SAAS,CAACC;AARD,CAA3B;;;;;"}