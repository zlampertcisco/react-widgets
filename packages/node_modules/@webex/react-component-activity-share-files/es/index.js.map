{"version":3,"file":"index.js","sources":["../../../../../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport connectFileDownloader from '@webex/react-container-file-downloader';\nimport ActivityItemBase from '@webex/react-component-activity-item-base';\nimport ActivityText from '@webex/react-component-activity-text';\nimport FileShareDisplay from '@webex/react-component-file-share-display';\nimport AdaptiveCard from '@webex/react-component-adaptive-card';\nimport {CARD_CONTAINS_IMAGE} from '@webex/react-component-utils';\n\nimport styles from './styles.css';\n\nconst propTypes = {\n  actor: PropTypes.shape({\n    displayName: PropTypes.string\n  }).isRequired,\n  content: PropTypes.string,\n  displayName: PropTypes.string,\n  files: PropTypes.arrayOf(PropTypes.shape({\n    image: PropTypes.shape({\n      url: PropTypes.string\n    }),\n    thumbnail: PropTypes.string,\n    mimeType: PropTypes.string,\n    url: PropTypes.string\n  })).isRequired,\n  isPending: PropTypes.bool,\n  onDownloadClick: PropTypes.func.isRequired,\n  share: PropTypes.object.isRequired,\n  timestamp: PropTypes.string.isRequired,\n  renderAdaptiveCard: PropTypes.bool,\n  cards: PropTypes.array,\n  sdkInstance: PropTypes.object.isRequired,\n  verb: PropTypes.string,\n  activityId: PropTypes.string,\n  intl: PropTypes.object.isRequired\n};\n\nconst defaultProps = {\n  content: '',\n  displayName: '',\n  isPending: false,\n  renderAdaptiveCard: false,\n  cards: [],\n  verb: '',\n  activityId: undefined\n};\n\nexport function ActivityShareFiles(props) {\n  const {\n    actor,\n    content,\n    displayName,\n    files,\n    isPending,\n    onDownloadClick,\n    share,\n    timestamp,\n    cards,\n    renderAdaptiveCard,\n    sdkInstance,\n    verb,\n    activityId,\n    intl\n  } = props;\n\n  const items = files.map((file) => {\n    let objectUrl;\n    let isFetching = true;\n\n    if (file.image && file.type !== CARD_CONTAINS_IMAGE) {\n      if (isPending) {\n        objectUrl = file.thumbnail;\n        isFetching = false;\n      }\n      else {\n        const thumbnail = file.mimeType === 'image/gif' ? share.getIn(['files', file.url]) : share.getIn(['files', file.image.url]);\n\n        if (thumbnail) {\n          isFetching = thumbnail.get('isFetching');\n          objectUrl = thumbnail.get('objectUrl');\n        }\n      }\n    }\n\n    if (file.type !== CARD_CONTAINS_IMAGE) {\n      return (\n        <FileShareDisplay\n          actor={actor}\n          file={file}\n          isFetching={isFetching}\n          isPending={isPending}\n          key={file.url}\n          objectUrl={objectUrl}\n          onDownloadClick={onDownloadClick}\n          type=\"chat\"\n          timestamp={timestamp}\n        />\n      );\n    }\n\n    return '';\n  });\n\n  let textItem;\n\n  if (!renderAdaptiveCard && (content || displayName)) {\n    textItem = <ActivityText content={content} displayName={displayName} />;\n  }\n\n  return (\n    <ActivityItemBase {...props}>\n      <div className={classNames('webex-activity-share-list', styles.shareList)}>\n        {renderAdaptiveCard && <AdaptiveCard\n          cards={cards}\n          displayName={displayName}\n          items={files}\n          verb={verb}\n          share={share}\n          sdkInstance={sdkInstance}\n          activityId={activityId}\n          intl={intl}\n        />}\n        {items}\n        {textItem}\n      </div>\n    </ActivityItemBase>\n  );\n}\n\nActivityShareFiles.propTypes = propTypes;\nActivityShareFiles.defaultProps = defaultProps;\n\nexport default connectFileDownloader(ActivityShareFiles);\n"],"names":["styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","propTypes","actor","PropTypes","shape","displayName","string","isRequired","content","files","arrayOf","image","url","thumbnail","mimeType","isPending","bool","onDownloadClick","func","share","object","timestamp","renderAdaptiveCard","cards","array","sdkInstance","verb","activityId","intl","defaultProps","undefined","ActivityShareFiles","props","items","map","file","objectUrl","isFetching","CARD_CONTAINS_IMAGE","getIn","get","textItem","classNames","styles","shareList","connectFileDownloader"],"mappings":"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"}