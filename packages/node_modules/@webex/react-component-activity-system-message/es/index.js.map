{"version":3,"file":"index.js","sources":["../src/messages.js","../../../../../node_modules/style-inject/dist/style-inject.es.js","../src/index.js"],"sourcesContent":["/*\n * System Message\n *\n * This contains all the text for the ActivitySystemMessage component.\n */\nimport {defineMessages} from 'react-intl';\n\nexport default defineMessages({\n  youCreate: {\n    id: 'ciscospark.systemMessage.conversation.youCreate',\n    defaultMessage: 'You created this conversation.'\n  },\n  someoneCreate: {\n    id: 'ciscospark.systemMessage.conversation.someoneCreate',\n    defaultMessage: '{name} created this conversation.'\n  },\n  youDelete: {\n    id: 'ciscospark.systemMessage.message.youDelete',\n    defaultMessage: 'You deleted your message.'\n  },\n  someoneDelete: {\n    id: 'ciscospark.systemMessage.message.someoneDelete',\n    defaultMessage: '{name} deleted their own message.'\n  },\n  youAdded: {\n    id: 'ciscospark.systemMessage.message.youAdded',\n    defaultMessage: 'You added {name} to this space.'\n  },\n  someoneAdded: {\n    id: 'ciscospark.systemMessage.message.youAdded',\n    defaultMessage: '{name} was added to this space.'\n  },\n  youRemoved: {\n    id: 'ciscospark.systemMessage.message.youRemoved',\n    defaultMessage: 'You removed {name} from this space.'\n  },\n  someoneRemoved: {\n    id: 'ciscospark.systemMessage.message.youRemoved',\n    defaultMessage: '{name} was removed from this space.'\n  }\n});\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport classNames from 'classnames';\nimport {FormattedMessage} from 'react-intl';\n\nimport CallDataActivityMessage from '@webex/react-component-call-data-activity';\n\nimport messages from './messages';\nimport styles from './styles.css';\n\n// eslint-disable-next-line no-warning-comments\n// TODO: Migrate message verbs into a top level helper package\n\nexport const SYSTEM_MESSAGE_VERB_TOMBSTONE = 'tombstone';\nexport const SYSTEM_MESSAGE_VERB_CREATE = 'create';\nexport const SYSTEM_MESSAGE_VERB_UPDATE = 'update';\nexport const SYSTEM_MESSAGE_VERB_ADD = 'add';\nexport const SYSTEM_MESSAGE_VERB_LEAVE = 'leave';\nexport const SYSTEM_MESSAGE_VERBS = [\n  SYSTEM_MESSAGE_VERB_CREATE,\n  SYSTEM_MESSAGE_VERB_TOMBSTONE,\n  SYSTEM_MESSAGE_VERB_UPDATE,\n  SYSTEM_MESSAGE_VERB_ADD,\n  SYSTEM_MESSAGE_VERB_LEAVE\n];\n\nconst propTypes = {\n  activity: PropTypes.shape({\n    duration: PropTypes.number,\n    isGroupCall: PropTypes.bool,\n    participants: PropTypes.shape({\n      items: PropTypes.arrayOf(\n        PropTypes.shape({\n          isInitiator: PropTypes.bool,\n          person: PropTypes.shape({\n            entryUUID: PropTypes.string\n          }),\n          state: PropTypes.string\n        })\n      )\n    })\n  }),\n  actor: PropTypes.shape({\n    entryUUID: PropTypes.string\n  }),\n  currentUser: PropTypes.shape({\n    id: PropTypes.string\n  }),\n  isSelf: PropTypes.bool,\n  name: PropTypes.string.isRequired,\n  timestamp: PropTypes.string,\n  verb: PropTypes.string.isRequired\n};\n\nconst defaultProps = {\n  activity: {\n    duration: null,\n    isGroupCall: false,\n    participants: {\n      items: []\n    }\n  },\n  actor: {},\n  currentUser: {},\n  isSelf: false,\n  timestamp: ''\n};\n\nfunction ActivitySystemMessage(props) {\n  const {\n    activity,\n    actor,\n    currentUser,\n    isSelf,\n    name,\n    timestamp,\n    verb\n  } = props;\n\n  let systemMessage;\n\n  switch (verb) {\n    case SYSTEM_MESSAGE_VERB_ADD: {\n      if (isSelf) {\n        systemMessage = <FormattedMessage {...messages.youAdded} values={{name}} />;\n      }\n      else {\n        systemMessage = <FormattedMessage {...messages.someoneAdded} values={{name}} />;\n      }\n      break;\n    }\n    case SYSTEM_MESSAGE_VERB_CREATE: {\n      if (isSelf) {\n        systemMessage = <FormattedMessage {...messages.youCreate} />;\n      }\n      else {\n        systemMessage = <FormattedMessage {...messages.someoneCreate} values={{name}} />;\n      }\n      break;\n    }\n    case SYSTEM_MESSAGE_VERB_LEAVE: {\n      if (isSelf) {\n        systemMessage = <FormattedMessage {...messages.youRemoved} values={{name}} />;\n      }\n      else {\n        systemMessage = <FormattedMessage {...messages.someoneRemoved} values={{name}} />;\n      }\n      break;\n    }\n    case SYSTEM_MESSAGE_VERB_TOMBSTONE: {\n      if (isSelf) {\n        systemMessage = <FormattedMessage {...messages.youDelete} />;\n      }\n      else {\n        systemMessage = <FormattedMessage {...messages.someoneDelete} values={{name}} />;\n      }\n      break;\n    }\n    case SYSTEM_MESSAGE_VERB_UPDATE: {\n      systemMessage = (\n        <CallDataActivityMessage\n          actor={actor}\n          currentUser={currentUser}\n          duration={activity.duration}\n          isGroupCall={activity.isGroupCall}\n          participants={activity.participants.items}\n        />\n      );\n      break;\n    }\n    default:\n      return null;\n  }\n\n  return (\n    <div className={classNames('webex-system-message', styles.systemMessage)}>\n      {systemMessage} {timestamp}\n    </div>\n  );\n}\n\nActivitySystemMessage.propTypes = propTypes;\nActivitySystemMessage.defaultProps = defaultProps;\n\nexport default ActivitySystemMessage;\n"],"names":["defineMessages","youCreate","id","defaultMessage","someoneCreate","youDelete","someoneDelete","youAdded","someoneAdded","youRemoved","someoneRemoved","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","type","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","SYSTEM_MESSAGE_VERB_TOMBSTONE","SYSTEM_MESSAGE_VERB_CREATE","SYSTEM_MESSAGE_VERB_UPDATE","SYSTEM_MESSAGE_VERB_ADD","SYSTEM_MESSAGE_VERB_LEAVE","SYSTEM_MESSAGE_VERBS","propTypes","activity","PropTypes","shape","duration","number","isGroupCall","bool","participants","items","arrayOf","isInitiator","person","entryUUID","string","state","actor","currentUser","isSelf","name","isRequired","timestamp","verb","defaultProps","ActivitySystemMessage","props","systemMessage","messages","classNames","styles"],"mappings":"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"}