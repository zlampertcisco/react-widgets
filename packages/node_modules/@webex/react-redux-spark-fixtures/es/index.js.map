{"version":3,"file":"index.js","sources":["../src/__fixtures__/spark.js","../src/__mocks__/spark-store.js"],"sourcesContent":["const mocks = [];\n\nfunction genMockFunction() {\n  const mock = jest.fn(() => Promise.resolve());\n\n  mocks.push(mock);\n\n  return mock;\n}\n\nexport default function createSpark() {\n  const spark = {\n    isAuthenticated: false,\n    isAuthenticating: false,\n    ready: false,\n    util: {\n      html: {\n        filterSync: genMockFunction(),\n        escapeSync: jest.fn((param) => param.toString())\n      }\n    },\n    authenticate: genMockFunction(),\n    listenToAndRun: genMockFunction(),\n    config: {trackingIdPrefix: 'testTrackingIdPrefix'},\n    client: {trackingIdBase: 'testTrackingIdBase'},\n    credentials: {\n      federation: true,\n      authorization: {\n      }\n    },\n    internal: {\n      device: {\n        url: 'https://example.com/devices/1',\n        services: {\n          roomServiceUrl: 'https://example.com/devices/services/room/1'\n        },\n        remove: genMockFunction(),\n        getServiceUrl: jest.fn(() => ''),\n        register: genMockFunction(),\n        unregister: genMockFunction()\n      },\n\n      encryption: {\n        decryptScr: genMockFunction(),\n        decryptText: genMockFunction(),\n        encryptText: genMockFunction(),\n        getUnusedKey: genMockFunction(),\n        download: genMockFunction(),\n        keystore: {\n          clear: genMockFunction()\n        },\n        kms: {\n          prepareRequest: genMockFunction(),\n          request: genMockFunction()\n        }\n      },\n\n      user: {\n        activate: genMockFunction(),\n        register: genMockFunction()\n      },\n      mercury: {\n        connect: genMockFunction(),\n        on: genMockFunction(),\n        once: genMockFunction(),\n        listen: genMockFunction(),\n        listenToAndRun: genMockFunction(),\n        stopListening: genMockFunction()\n      },\n\n      conversation: {\n        assign: genMockFunction(),\n        download: genMockFunction(),\n        get: genMockFunction(),\n        unassign: genMockFunction(),\n        update: genMockFunction()\n      }\n    },\n\n\n    feature: {\n      getFeature: genMockFunction()\n    },\n\n    support: {\n      submitCallLogs: genMockFunction()\n    },\n\n    flagging: {\n      flag: genMockFunction(),\n      mapToActivities: genMockFunction()\n    },\n\n    board: {\n      decryptContents: genMockFunction(),\n      decryptSingleContent: genMockFunction(),\n      encryptContents: genMockFunction(),\n      encryptSingleContent: genMockFunction(),\n      persistence: {\n        ping: genMockFunction(),\n        register: genMockFunction(),\n        createChannel: genMockFunction(),\n        getChannel: genMockFunction(),\n        getChannels: genMockFunction(),\n        addContent: genMockFunction(),\n        addImage: genMockFunction(),\n        getAllContent: genMockFunction(),\n        deleteContent: genMockFunction(),\n        deleteAllContent: genMockFunction()\n      },\n      realtime: {\n        on: genMockFunction(),\n        publish: genMockFunction(),\n        once: genMockFunction(),\n        set: genMockFunction()\n      }\n    },\n\n    on: genMockFunction(),\n\n    request: genMockFunction(),\n\n    search: {\n      search: genMockFunction(),\n      people: genMockFunction()\n    }\n  };\n\n  return spark;\n}\n","// Store for testing\nimport {\n  applyMiddleware,\n  combineReducers,\n  compose,\n  createStore\n} from 'redux';\nimport configureMockStore from 'redux-mock-store';\nimport thunk from 'redux-thunk';\n\nimport {initialState as mercury} from '@webex/redux-module-mercury';\nimport reducers, {initialState} from '@webex/react-redux-spark';\n\nimport createSpark from '../__fixtures__/spark';\n\n\nexport function createMockStore() {\n  const mockStore = configureMockStore([thunk]);\n  const store = mockStore({\n    mercury,\n    spark: initialState.set('spark', createSpark())\n  });\n\n  return store;\n}\n\nexport default function createSparkStore() {\n  return createStore(\n    combineReducers({\n      spark: reducers\n    }),\n    compose([\n      applyMiddleware(thunk)\n    ])\n  );\n}\n"],"names":["genMockFunction","mock","jest","fn","Promise","resolve","createSpark","spark","isAuthenticated","isAuthenticating","ready","util","html","filterSync","escapeSync","param","toString","authenticate","listenToAndRun","config","trackingIdPrefix","client","trackingIdBase","credentials","federation","authorization","internal","device","url","services","roomServiceUrl","remove","getServiceUrl","register","unregister","encryption","decryptScr","decryptText","encryptText","getUnusedKey","download","keystore","clear","kms","prepareRequest","request","user","activate","mercury","connect","on","once","listen","stopListening","conversation","assign","get","unassign","update","feature","getFeature","support","submitCallLogs","flagging","flag","mapToActivities","board","decryptContents","decryptSingleContent","encryptContents","encryptSingleContent","persistence","ping","createChannel","getChannel","getChannels","addContent","addImage","getAllContent","deleteContent","deleteAllContent","realtime","publish","set","search","people","createMockStore","mockStore","configureMockStore","thunk","store","initialState","createSparkStore","createStore","combineReducers","reducers","compose","applyMiddleware"],"mappings":"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"}