{"version":3,"file":"index.js","sources":["../src/messages.js","../src/constants.js","../src/actions.js","../src/reducer.js","../../react-redux-spark/src/actions.js","../src/components/activity-menu/index.js","../../../../../node_modules/style-inject/dist/style-inject.es.js","../src/events.js","../src/enhancers/activity-menu.js","../src/enhancers/errors.js","../src/selector.js","../src/enhancers/setup.js","../src/enhancers/external-control.js","../src/enhancers/index.js","../src/container.js","../src/translations/en.js","../src/index.js"],"sourcesContent":["/*\n * WidgetSpace Messages\n *\n * This contains all the text for the FeaturePage component.\n */\nimport {defineMessages} from 'react-intl';\n\nexport default defineMessages({\n  errorConnection: {\n    id: 'ciscospark.container.space.error.connection',\n    defaultMessage: 'Connection unavailable.'\n  },\n  errorNotFound: {\n    id: 'ciscospark.container.space.error.notfound',\n    defaultMessage: 'Either the Space does not exist or you don\\'t have permission to view this Space'\n  },\n  errorBadToken: {\n    id: 'ciscospark.container.space.error.badtoken',\n    defaultMessage: 'Error: Bad or Invalid Access Token'\n  },\n  errorToSelf: {\n    id: 'ciscospark.container.space.error.toself',\n    defaultMessage: 'Error: You Cannot Open a Space with Yourself'\n  },\n  badSpaceId: {\n    id: 'ciscospark.container.space.error.badid',\n    defaultMessage: 'Error: Invalid Space ID'\n  },\n  disabledInitialActivity: {\n    id: 'ciscospark.container.space.error.invalidActivity',\n    defaultMessage: 'Error: The selected initial activity is invalid'\n  },\n  unableToLoad: {\n    id: 'ciscospark.container.space.error.unabletoload',\n    defaultMessage: 'Unable to Load Space'\n  },\n  unknownDestination: {\n    id: 'ciscospark.container.space.error.unknownDestination',\n    defaultMessage: 'Please provide a Space ID or To Person'\n  },\n  invalidDestination: {\n    id: 'ciscospark.container.space.error.invalidDestination',\n    defaultMessage: 'Destination IDs must be fully encoded (not a UUID)'\n  },\n  unknownError: {\n    id: 'ciscospark.container.space.error.unknown',\n    defaultMessage: 'There was a problem loading space'\n  },\n  reconnecting: {\n    id: 'ciscospark.container.space.error.reconnecting',\n    defaultMessage: 'Reconnecting...'\n  },\n  errorConversation: {\n    id: 'ciscospark.container.space.error.noConversation',\n    defaultMessage: 'Conversation Not Available'\n  }\n});\n","/* eslint-disable import/prefer-default-export */\n\nexport const destinationTypes = {\n  EMAIL: 'email',\n  USERID: 'userId',\n  SPACEID: 'spaceId',\n  SIP: 'sip',\n  PSTN: 'pstn'\n};\n","import {validateAndDecodeId} from '@webex/react-component-utils';\nimport {addError} from '@webex/redux-module-errors';\n\nimport messages from './messages';\n\nimport {destinationTypes} from './constants';\n\nexport const FETCHING_SPACE_DETAILS = 'widget-space/FETCHING_SPACE_DETAILS';\nexport const RELOAD_WIDGET = 'widget-space/RELOAD_WIDGET';\nexport const STORE_ACTIVITY_TYPES = 'widget-space/STORE_ACTIVITY_TYPES';\nexport const STORE_DESTINATION = 'widget-space/STORE_DESTINATION';\nexport const STORE_SPACE_DETAILS = 'widget-space/STORE_SPACE_DETAILS';\nexport const TOGGLE_ACTIVITY_MENU_VISIBLE = 'widget-space/TOGGLE_ACTIVITY_MENU_VISIBLE';\nexport const UPDATE_ACTIVITY_TYPE = 'widget-space/UPDATE_ACTIVITY_TYPE';\nexport const UPDATE_ACTIVITY_TYPE_SECONDARY = 'widget-space/UPDATE_ACTIVITY_TYPE_SECONDARY';\nexport const UPDATE_ACTIVITY_MENU_VISIBLE = 'widget-space/UPDATE_ACTIVITY_MENU_VISIBLE';\nexport const UPDATE_WIDGET_STATUS = 'widget-space/UPDATE_WIDGET_STATUS';\n\nexport function updateActivityType(type) {\n  return {\n    type: UPDATE_ACTIVITY_TYPE,\n    payload: {\n      type\n    }\n  };\n}\n\nexport function updateSecondaryActivityType(type) {\n  return {\n    type: UPDATE_ACTIVITY_TYPE_SECONDARY,\n    payload: {\n      type\n    }\n  };\n}\n\n/**\n * Resets the widget to \"almost\" default values\n * This is usually triggered when a destination changes\n *\n * @export\n * @returns {Object}\n */\nexport function reloadWidget() {\n  return {\n    type: RELOAD_WIDGET\n  };\n}\n\n/**\n * Stores the space widget's destination\n *\n * @export\n * @param {Object} {id, location}\n * @returns {Object}\n */\nexport function storeDestination({id, cluster, type}) {\n  return {\n    type: STORE_DESTINATION,\n    payload: {\n      id,\n      type,\n      // Don't store a undefined value\n      ...cluster && {cluster}\n    }\n  };\n}\n\nexport function updateActivityMenuVisible(isActivityMenuVisible) {\n  return {\n    type: UPDATE_ACTIVITY_MENU_VISIBLE,\n    payload: {\n      isActivityMenuVisible\n    }\n  };\n}\n\nexport function toggleActivityMenuVisible() {\n  return {\n    type: TOGGLE_ACTIVITY_MENU_VISIBLE\n  };\n}\n\nfunction storeSpaceDetails(details) {\n  return {\n    type: STORE_SPACE_DETAILS,\n    payload: {\n      details\n    }\n  };\n}\n\nexport function storeActivityTypes(activityTypes) {\n  return {\n    type: STORE_ACTIVITY_TYPES,\n    payload: {\n      activityTypes\n    }\n  };\n}\n\nexport function updateWidgetStatus(status) {\n  return {\n    type: UPDATE_WIDGET_STATUS,\n    payload: {\n      status\n    }\n  };\n}\n\n\nfunction fetchingSpaceDetails() {\n  return {\n    type: FETCHING_SPACE_DETAILS\n  };\n}\n\n/**\n * Gets details about the space\n * @param {Object} options.sparkInstance\n * @param {String} options.destinationId\n * @param {String} options.destinationType\n * @param {String} options.destinationCluster\n * @param {Object} options.intl\n * @returns {Thunk}\n */\nexport function getSpaceDetails({\n  sparkInstance,\n  destinationId,\n  destinationType,\n  intl\n}) {\n  return (dispatch) => {\n    // We cannot fetch space details for 1:1's here, it will be handled in conversation store\n    if ([\n      destinationTypes.EMAIL,\n      destinationTypes.USERID,\n      destinationTypes.SIP,\n      destinationTypes.PSTN\n    ].includes(destinationType)) {\n      return dispatch(storeSpaceDetails({\n        type: 'direct'\n      }));\n    }\n    const {formatMessage} = intl;\n    const {id: spaceIdUUID} = validateAndDecodeId(destinationId);\n\n    if (!spaceIdUUID) {\n      const displayTitle = formatMessage(messages.unableToLoad);\n      const displaySubtitle = formatMessage(messages.badSpaceId);\n\n      return dispatch(addError({\n        id: 'getSpace.badId',\n        displayTitle,\n        displaySubtitle,\n        temporary: false\n      }));\n    }\n    dispatch(fetchingSpaceDetails());\n\n    return sparkInstance.request({\n      service: 'hydra',\n      resource: `/rooms/${destinationId}`\n    })\n      .then((res) => dispatch(storeSpaceDetails(res.body)))\n      .catch((error) => {\n        const displayTitle = formatMessage(messages.unableToLoad);\n        let displaySubtitle;\n\n        if (error.statusCode === 401) {\n          displaySubtitle = formatMessage(messages.errorBadToken);\n        }\n        else if (error.statusCode === 404) {\n          displaySubtitle = formatMessage(messages.errorNotFound);\n        }\n\n        return dispatch(addError({\n          id: 'getSpace.hydraFail',\n          displayTitle,\n          displaySubtitle,\n          temporary: false,\n          code: error.statusCode\n        }));\n      });\n  };\n}\n","import {fromJS, Record} from 'immutable';\nimport {reducers as message} from '@webex/widget-message';\nimport {reducers as meet} from '@webex/widget-meet';\nimport {reducers as roster} from '@webex/widget-roster';\nimport errors from '@webex/redux-module-errors';\nimport features from '@webex/redux-module-features';\nimport mercury from '@webex/redux-module-mercury';\nimport media from '@webex/redux-module-media';\nimport spaces from '@webex/redux-module-spaces';\nimport users from '@webex/redux-module-users';\n\nimport {\n  FETCHING_SPACE_DETAILS,\n  RELOAD_WIDGET,\n  STORE_ACTIVITY_TYPES,\n  STORE_DESTINATION,\n  STORE_SPACE_DETAILS,\n  TOGGLE_ACTIVITY_MENU_VISIBLE,\n  UPDATE_ACTIVITY_MENU_VISIBLE,\n  UPDATE_ACTIVITY_TYPE,\n  UPDATE_ACTIVITY_TYPE_SECONDARY,\n  UPDATE_WIDGET_STATUS\n} from './actions';\n\nconst Status = Record({\n  activityMenuVisible: false,\n  hasError: false,\n  hasFetchedFeatureFlags: false,\n  isFetchingFeatureFlags: false,\n  isFetchingSpaceDetails: false,\n  shouldReloadWidget: false\n});\n\nconst Destination = Record({\n  id: null,\n  type: null\n});\n\nexport const initialState = fromJS({\n  activityTypes: [],\n  destination: null,\n  error: null,\n  primaryActivityType: null,\n  secondaryActivityType: null,\n  spaceDetails: null,\n  status: new Status()\n});\n\nexport function reducer(state = initialState, action) {\n  switch (action.type) {\n    case UPDATE_ACTIVITY_MENU_VISIBLE:\n      return state.set('activityMenuVisible', action.payload.isActivityMenuVisible);\n\n    case UPDATE_ACTIVITY_TYPE:\n      return state.set('primaryActivityType', action.payload.type)\n        .set('secondaryActivityType', null)\n        .setIn(['status', 'activityMenuVisible'], false);\n\n    case UPDATE_ACTIVITY_TYPE_SECONDARY:\n      return state.set('secondaryActivityType', action.payload.type)\n        .setIn(['status', 'activityMenuVisible'], false);\n\n    case TOGGLE_ACTIVITY_MENU_VISIBLE:\n      return state.setIn(['status', 'activityMenuVisible'], !state.getIn(['status', 'activityMenuVisible']));\n\n    case FETCHING_SPACE_DETAILS:\n      return state.setIn(['status', 'isFetchingSpaceDetails'], true);\n\n    case STORE_SPACE_DETAILS:\n      return state.setIn(['status', 'isFetchingSpaceDetails'], false)\n        .set('spaceDetails', fromJS(Object.assign({}, action.payload.details)));\n\n    case STORE_ACTIVITY_TYPES: {\n      return state.set('activityTypes', fromJS(action.payload.activityTypes));\n    }\n\n    case STORE_DESTINATION: {\n      return state.set('destination', new Destination(action.payload));\n    }\n\n    case UPDATE_WIDGET_STATUS: {\n      return state.mergeIn(['status'], action.payload.status);\n    }\n\n    case RELOAD_WIDGET: {\n      return state.setIn(['status', 'shouldReloadWidget'], false)\n        .set('destination', null)\n        .set('spaceDetails', null);\n    }\n\n    default:\n      return state;\n  }\n}\n\nconst reducers = {\n  ...message,\n  ...meet,\n  ...roster,\n  errors,\n  features,\n  users,\n  mercury,\n  media,\n  spaces,\n  widgetSpace: reducer\n};\n\nexport default reducers;\n","import {getStatusFromInstance} from './helpers';\n\nexport const REGISTER_DEVICE_FAILURE = 'spark/REGISTER_DEVICE_FAILURE';\nexport const UNREGISTER_DEVICE_FAILURE = 'spark/UNREGISTER_DEVICE_FAILURE';\nexport const STORE_SPARK_INSTANCE = 'spark/STORE_SPARK_INSTANCE';\nexport const UPDATE_SPARK_STATUS = 'spark/UPDATE_SPARK_STATUS';\nexport const STORE_SPARK_ADAPTOR = 'spark/STORE_SPARK_ADAPTOR';\n\nfunction registerDeviceFailure(error) {\n  return {\n    type: REGISTER_DEVICE_FAILURE,\n    payload: {\n      error\n    }\n  };\n}\n\nfunction unregisterDeviceFailure(error) {\n  return {\n    type: UNREGISTER_DEVICE_FAILURE,\n    payload: {\n      error\n    }\n  };\n}\n\nexport function updateSparkStatus(status) {\n  return {\n    type: UPDATE_SPARK_STATUS,\n    payload: {\n      status\n    }\n  };\n}\n\n\nexport function storeSparkInstance(spark) {\n  return {\n    type: STORE_SPARK_INSTANCE,\n    payload: {\n      status: getStatusFromInstance(spark),\n      spark\n    }\n  };\n}\n\nexport const storeSparkAdaptor = (adaptor) => ({\n  type: STORE_SPARK_ADAPTOR,\n  payload: {\n    adaptor\n  }\n});\n\nexport function registerDevice(spark) {\n  return (dispatch) => {\n    dispatch(updateSparkStatus({registering: true}));\n\n    return spark.internal.device.register()\n      .then(() => dispatch(updateSparkStatus({registering: false, registered: true})))\n      .catch((error) => dispatch(registerDeviceFailure(error)));\n  };\n}\n\n\nexport function unregisterDevice(spark) {\n  return (dispatch) => {\n    dispatch(updateSparkStatus({unregistering: true}));\n\n    return spark.internal.device.unregister()\n      .then(() => dispatch(updateSparkStatus({unregistering: false, registered: false})))\n      .catch((error) => dispatch(unregisterDeviceFailure(error)));\n  };\n}\n","import React from 'react';\nimport PropTypes from 'prop-types';\n\nimport ActivityMenu from '@webex/react-component-activity-menu';\n\nconst propTypes = {\n  activityTypes: PropTypes.array.isRequired,\n  onChange: PropTypes.func,\n  onExit: PropTypes.func\n};\n\nconst defaultProps = {\n  onChange: () => {},\n  onExit: () => {}\n};\n\nfunction SpaceActivityMenu({\n  activityTypes,\n  onChange,\n  onExit\n}) {\n  function handleChange(activity) {\n    return () => onChange(activity);\n  }\n\n  const buttons = activityTypes.map((a) => ({\n    label: a.displayName,\n    buttonClassName: a.buttonClassName,\n    buttonType: a.buttonType,\n    onClick: handleChange(a)\n  }));\n\n  return (\n    <ActivityMenu\n      buttons={buttons}\n      onExit={onExit}\n      showExitButton\n    />\n  );\n}\n\nSpaceActivityMenu.propTypes = propTypes;\nSpaceActivityMenu.defaultProps = defaultProps;\n\nexport default SpaceActivityMenu;\n","function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","export const eventNames = {\n  SPACES_READ: 'rooms:read',\n  SPACES_UNREAD: 'rooms:unread',\n  MESSAGES_CREATED: 'messages:created',\n  CALLS_CREATED: 'calls:created',\n  CALLS_CONNECTED: 'calls:connected',\n  CALLS_DISCONNECTED: 'calls:disconnected',\n  CALL_MEMBERSHIPS_NOTIFIED: 'calls:memberships:notified',\n  CALL_MEMBERSHIPS_CONNECTED: 'calls:memberships:connected',\n  CALL_MEMBERSHIPS_DECLINED: 'calls:memberships:declined',\n  CALL_MEMBERSHIPS_DISCONNECTED: 'calls:memberships:disconnected',\n  ACTIVITY_CHANGED: 'activity:changed'\n};\n\nexport default {\n  eventNames\n};\n","import React from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport {\n  compose,\n  lifecycle,\n  setPropTypes,\n  withHandlers\n} from 'recompose';\nimport classNames from 'classnames';\n\nimport MessageWidget from '@webex/widget-message';\nimport MeetWidget from '@webex/widget-meet';\nimport RosterWidget from '@webex/widget-roster';\nimport FilesWidget from '@webex/widget-files';\n\nimport {Icon} from '@momentum-ui/react';\nimport {getFeature} from '@webex/redux-module-features';\n\nimport {\n  updateWidgetStatus,\n  updateActivityType,\n  storeActivityTypes,\n  toggleActivityMenuVisible,\n  updateSecondaryActivityType\n} from '../actions';\nimport {eventNames} from '../events';\nimport styles from '../styles.css';\n\nexport const ACTIVITY_TYPE_PRIMARY = 'ACTIVITY_TYPE_PRIMARY';\nexport const ACTIVITY_TYPE_SECONDARY = 'ACTIVITY_TYPE_SECONDARY';\nconst DEFAULT_ACTIVITY = 'message';\n\nexport const propTypes = {\n  initialActivity: PropTypes.string\n};\n\n\n/**\n * Builds widget elements from activityTypes list\n *\n * @param {List} activityTypes Immutable List of activity types\n * @param {String} primaryActivityType Active activity type\n * @returns {Array} of Widget elements\n */\n\nfunction constructActivityWidgets(props) {\n  return (activityTypes, primaryActivityType, composerActions) => activityTypes\n    .filter((activityType) => activityType.type !== ACTIVITY_TYPE_SECONDARY)\n    .map((a) => {\n      // Only allow widget if it's available for this space type\n      const Widget = a.component;\n      const isVisible = primaryActivityType === a.name ? '' : styles.hidden;\n\n      return (\n        <div\n          className={classNames(`webex-${a.name}-wrapper`, styles.activityComponentWrapper, isVisible)}\n          key={a.name}\n        >\n          <Widget\n            {...props}\n            composerActions={composerActions}\n            eventNames={eventNames}\n            injectProvider={false}\n            toPerson={props.spaceDetails.toPerson}\n          />\n        </div>\n      );\n    });\n}\n\n/**\n * Builds secondary widget elements\n *\n * @param {Object} props\n * @returns {Function}\n */\nfunction constructSecondaryActivityWidget(props) {\n  return (activityTypes, secondaryActivityType) => {\n    if (!secondaryActivityType) {\n      return null;\n    }\n\n    const secondaryWidgetClassNames = [\n      'webex-secondary-widget',\n      styles.secondaryWidget,\n      props.secondaryActivitiesFullWidth ? styles.secondaryWidgetFull : styles.secondaryWidgetCover\n    ];\n\n    return activityTypes\n      .filter((activityType) =>\n        activityType.type === ACTIVITY_TYPE_SECONDARY && activityType.name === secondaryActivityType)\n      .map((activityType) => {\n        const Widget = activityType.component;\n\n        return (\n          <div\n            className={classNames(secondaryWidgetClassNames)}\n            key={activityType.name}\n          >\n            <Widget\n              {...props}\n              {...activityType.props}\n              eventNames={eventNames}\n              injectProvider={false}\n            />\n          </div>\n        );\n      });\n  };\n}\n\nfunction handleActivityChange(props) {\n  return (activity) => {\n    if (activity.type === ACTIVITY_TYPE_PRIMARY) {\n      props.updateActivityType(activity.name);\n    }\n    else {\n      props.updateSecondaryActivityType(activity.name);\n    }\n    // Emit Event\n    props.onEvent(eventNames.ACTIVITY_CHANGED, activity);\n  };\n}\n\nfunction handleSecondaryDismiss(props) {\n  return () => props.updateSecondaryActivityType(null);\n}\n\nfunction handleMenuClick(props) {\n  return () => props.toggleActivityMenuVisible();\n}\n\n\nfunction getFeatureFlags(props) {\n  const {\n    widgetSpace,\n    widgetStatus\n  } = props;\n\n  if (widgetStatus.get('hasFetchedFeatureFlags') || widgetStatus.get('isFetchingFeatureFlags')) {\n    return;\n  }\n  props.updateWidgetStatus({isFetchingFeatureFlags: true});\n  widgetSpace.get('activityTypes').toJS().forEach((activityType) => {\n    if (!activityType.feature) {\n      return;\n    }\n    props.getFeature(activityType.feature.type, activityType.feature.key, props.sparkInstance);\n  });\n  props.updateWidgetStatus({hasFetchedFeatureFlags: true, isFetchingFeatureFlags: false});\n}\n\n\nexport default compose(\n  connect(\n    (state) => state,\n    (dispatch) => bindActionCreators({\n      getFeature,\n      updateWidgetStatus,\n      updateActivityType,\n      storeActivityTypes,\n      toggleActivityMenuVisible,\n      updateSecondaryActivityType\n    }, dispatch)\n  ),\n  setPropTypes(propTypes),\n  withHandlers({\n    handleSecondaryDismiss,\n    handleMenuClick,\n    handleActivityChange,\n    constructActivityWidgets,\n    constructSecondaryActivityWidget\n  }),\n  lifecycle({\n    componentWillMount() {\n      const {\n        props\n      } = this;\n      // Store activity types used in widget\n\n      const DEFAULT_ACTIVITY_TYPES = [\n        {\n          displayName: 'Messages',\n          name: 'message',\n          buttonClassName: styles.messageButton,\n          buttonType: 'chat',\n          component: MessageWidget,\n          spaceTypes: ['group', 'direct'],\n          type: ACTIVITY_TYPE_PRIMARY\n        },\n        {\n          displayName: 'Content',\n          name: 'files',\n          buttonClassName: styles.filesButton,\n          buttonType: 'files',\n          component: FilesWidget,\n          spaceTypes: ['direct', 'group'],\n          type: ACTIVITY_TYPE_PRIMARY,\n          props: {\n            onClickClose: props.handleSecondaryDismiss,\n            onClickMenu: props.handleMenuClick\n          }\n        },\n        {\n          displayName: 'People',\n          name: 'people',\n          buttonClassName: styles.peopleButton,\n          buttonType: {color: 'mint', icon: <Icon name=\"icon-people_28\" />},\n          component: RosterWidget,\n          spaceTypes: ['direct', 'group'],\n          type: ACTIVITY_TYPE_PRIMARY,\n          props: {\n            onClickClose: props.handleSecondaryDismiss,\n            onClickMenu: props.handleMenuClick\n          }\n        },\n        {\n          displayName: 'Call',\n          name: 'meet',\n          buttonClassName: styles.meetButton,\n          buttonType: 'camera',\n          component: MeetWidget,\n          spaceTypes: ['direct', 'group'],\n          type: ACTIVITY_TYPE_PRIMARY\n        }\n      ];\n\n      let activityTypes = DEFAULT_ACTIVITY_TYPES;\n\n      if (typeof props.customActivityTypes === 'object') {\n        activityTypes = activityTypes.concat(props.customActivityTypes);\n      }\n      props.storeActivityTypes(activityTypes);\n    },\n    componentWillReceiveProps(nextProps) {\n      const {\n        activityTypes,\n        spaceDetails,\n        sparkInstance,\n        sparkState,\n        initialActivity,\n        call\n      } = nextProps;\n      const {props} = this;\n\n      // Set the initial activity once we get space details\n      if (sparkInstance\n        && sparkState.get('authenticated')\n        && sparkState.get('registered')\n        && !sparkState.get('hasError')) {\n        getFeatureFlags(nextProps);\n      }\n      if (!props.spaceDetails && spaceDetails) {\n        if (activityTypes.find((a) => a.name === initialActivity)) {\n          props.updateActivityType(initialActivity);\n        }\n        // if default activity is available\n        else if (activityTypes.find((a) => a.name === DEFAULT_ACTIVITY)) {\n          props.updateActivityType(DEFAULT_ACTIVITY);\n        }\n        // use first available activity in activity list\n        else {\n          props.updateActivityType(activityTypes[0].name);\n        }\n      }\n\n      const prevCall = props.call;\n      const hasMeet = activityTypes.some((activity) => activity.name === 'meet');\n      const hasMessage = activityTypes.some((activity) => activity.name === 'message');\n\n      // Switch to Meet if ringing\n      if (hasMeet && call && !prevCall && !call.get('isDeclined')) {\n        nextProps.updateActivityType('meet');\n      }\n\n      // Reset back to message view after call ends\n      if (hasMessage && prevCall && !call) {\n        nextProps.updateActivityType('message');\n      }\n    }\n  })\n);\n","import {connect} from 'react-redux';\nimport {compose, lifecycle} from 'recompose';\nimport {bindActionCreators} from 'redux';\nimport {addError, removeError} from '@webex/redux-module-errors';\nimport {validateAndDecodeId, isUuid} from '@webex/react-component-utils';\n\nimport messages from '../messages';\n\nimport {destinationTypes} from '../constants';\n\nimport {ACTIVITY_TYPE_PRIMARY} from './activity-menu';\n\nfunction checkForMercuryErrors(props) {\n  const {\n    errors,\n    intl,\n    mercury\n  } = props;\n  // Add Mercury disconnect error\n  const mercuryError = 'mercury.disconnect';\n  const isMercuryConnected = mercury.getIn(['status', 'connected']);\n  const isMercuryDisconnected = !isMercuryConnected && mercury.getIn(['status', 'hasConnected']);\n  const hasError = errors.get('hasError');\n  const hasMercuryError = errors.get('errors').has(mercuryError);\n  const hasNoMercuryError = !hasError || !hasMercuryError;\n\n  if (isMercuryDisconnected && hasNoMercuryError) {\n    // Create UI Error\n    const {formatMessage} = intl;\n\n    props.addError({\n      id: mercuryError,\n      displayTitle: formatMessage(messages.errorConnection),\n      displaySubtitle: formatMessage(messages.reconnecting),\n      temporary: true\n    });\n  }\n  if (isMercuryConnected && hasMercuryError) {\n    props.removeError(mercuryError);\n  }\n}\n\n/**\n * Checks for SDK device registration errors\n * @param {Object} props\n */\nfunction checkForRegistrationErrors(props) {\n  const {\n    errors,\n    sparkState,\n    spark\n  } = props;\n\n  const {formatMessage} = props.intl;\n\n  const registerErrorId = 'spark.register';\n\n  if (sparkState.get('registerError') && (!errors.get('hasError') || !errors.get('errors').has(registerErrorId))) {\n    const error = spark.get('error');\n    let displaySubtitle = formatMessage(messages.unknownError);\n\n    if (error.statusCode === 401) {\n      displaySubtitle = formatMessage(messages.errorBadToken);\n    }\n    props.addError({\n      id: registerErrorId,\n      displayTitle: formatMessage(messages.unableToLoad),\n      displaySubtitle,\n      temporary: false,\n      code: error.statusCode\n    });\n  }\n}\n\n/**\n * Verifies the destination provided is valid\n * @param {Object} props\n */\nfunction checkForDestinationErrors(props) {\n  const {\n    currentUser,\n    destination,\n    destinationId,\n    destinationType,\n    errors\n  } = props;\n  const {formatMessage} = props.intl;\n\n  // Destination type and id are required\n  const missingDestinationErrorId = 'space.error.missingDestination';\n\n  if (\n    !destinationId && !destinationType &&\n    (!errors.get('hasError') || !errors.get('errors').has(missingDestinationErrorId))\n  ) {\n    // No destination found\n    props.addError({\n      id: missingDestinationErrorId,\n      displayTitle: formatMessage(messages.unableToLoad),\n      displaySubtitle: formatMessage(messages.unknownDestination),\n      temporary: false\n    });\n  }\n\n  // Cannot start a space with yourself\n  const toSelfErrorId = 'space.error.toSelf';\n\n  if (\n    destination &&\n    currentUser && currentUser.id && currentUser.email &&\n    (!errors.get('hasError') || !errors.get('errors').has(toSelfErrorId))\n  ) {\n    // Check for to user being self\n    if (\n      destination.type === destinationTypes.EMAIL && currentUser.email === destination.id\n      || destination.type === destinationTypes.USERID && validateAndDecodeId(destination.id).id === currentUser.id\n    ) {\n      props.addError({\n        id: toSelfErrorId,\n        displayTitle: formatMessage(messages.unableToLoad),\n        displaySubtitle: formatMessage(messages.errorToSelf),\n        temporary: false\n      });\n    }\n  }\n\n  // Cannot start a space to a UUID destination ID\n  const invalidDestinationErrorId = 'space.error.invalidDestination';\n\n  if (\n    destinationId && isUuid(destinationId) &&\n    (!errors.get('hasError') || !errors.get('errors').has(invalidDestinationErrorId))\n  ) {\n    // No destination found\n    props.addError({\n      id: invalidDestinationErrorId,\n      displayTitle: formatMessage(messages.unableToLoad),\n      displaySubtitle: formatMessage(messages.invalidDestination),\n      temporary: false\n    });\n  }\n}\n\n/**\n * Verifies the prop based activity types are valid\n * @param {Object} props\n */\nfunction checkActivityTypes(props) {\n  const {\n    activityTypes,\n    errors,\n    initialActivity\n  } = props;\n  const {formatMessage} = props.intl;\n\n  if (activityTypes && activityTypes.length > 0) {\n    const invalidActivityId = 'ciscospark.container.space.error.invalidActivity';\n    const defaultActivity = 'message';\n    let validActivity = false;\n\n    if (activityTypes.some((activity) => activity.name === initialActivity)\n    || activityTypes.some((activity) => activity.name === defaultActivity)\n    || activityTypes[0] && activityTypes[0].name && activityTypes[0].type === ACTIVITY_TYPE_PRIMARY\n    ) {\n      validActivity = true;\n    }\n    if (!validActivity && !errors.get('errors').has(invalidActivityId)) {\n      props.addError({\n        id: invalidActivityId,\n        displayTitle: formatMessage(messages.disabledInitialActivity),\n        temporary: false\n      });\n    }\n    if (validActivity && errors.get('errors').has(invalidActivityId)) {\n      props.removeError(invalidActivityId);\n    }\n  }\n}\n\nfunction checkForErrors(props) {\n  checkForMercuryErrors(props);\n  checkForRegistrationErrors(props);\n  checkForDestinationErrors(props);\n  checkActivityTypes(props);\n}\n\nexport default compose(\n  connect(\n    (state) => state,\n    (dispatch) => bindActionCreators({\n      addError,\n      removeError\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillMount() {\n      checkForErrors(this.props);\n    },\n    componentWillReceiveProps: (nextProps) => {\n      checkForErrors(nextProps);\n    }\n  })\n);\n","import {createSelector} from 'reselect';\n\nimport {validateAndDecodeId} from '@webex/react-component-utils';\n\nimport {destinationTypes} from './constants';\n\nconst getWidget = (state) => state.widgetSpace;\nconst getSpark = (state) => state.spark;\nconst getMedia = (state) => state.media;\nconst getConversation = (state) => state.conversation;\nconst getFeatures = (state) => state.features;\nconst getUsers = (state) => state.users;\nconst getSpaces = (state) => state.spaces;\nconst getOwnProps = (state, ownProps) => ownProps;\nconst getMercuryStatus = (state) => state.mercury.get('status');\n\nexport const getCall = createSelector(\n  [getConversation, getMedia, getWidget, getOwnProps],\n  (conversation, media, widget, ownProps) => {\n    if (ownProps && ownProps.call && typeof ownProps.call === 'object'\n      && ownProps.call.id) {\n      return ownProps.call;\n    }\n    let mediaId;\n\n    // Conversation is the easiest way to get a media id\n    if (conversation.has('locusUrl')) {\n      mediaId = media.getIn(['byLocusUrl', conversation.get('locusUrl')]);\n    }\n    else {\n      const destination = widget.get('destination');\n\n      if (!destination) {\n        return null;\n      }\n      mediaId = media.getIn(['byDestination', destination.id]);\n\n      // Incoming call\n      if (!mediaId &&\n        [destinationTypes.SIP, destinationTypes.PSTN].includes(destination.type)) {\n        // This is a bit of a hack. We're matching on the string, but this can\n        // cause ambiguity if the phone numbers are too close.\n        const matchedCall = media.get('byId').find((call) => {\n          if (call && call.has('instance')) {\n            const {locus} = call.get('instance');\n\n            if (locus && locus.host) {\n              if (destination.type === destinationTypes.PSTN && locus.host.phoneNumber) {\n                if (destination.id.startsWith('+')) {\n                  return locus.host.phoneNumber === destination.id;\n                }\n\n                return locus.host.phoneNumber.includes(destination.id);\n              }\n              if (locus.info && locus.info.sipUri) {\n                return locus.info.sipUri.includes(destination.id);\n              }\n            }\n          }\n\n          return false;\n        });\n\n        if (matchedCall) {\n          mediaId = media.getIn(['byLocusUrl', matchedCall.get('instance').locus.url]);\n        }\n      }\n    }\n\n    const call = media.getIn(['byId', mediaId]);\n\n    if (call && call.isDismissed) {\n      return null;\n    }\n\n    return call;\n  }\n);\n\nexport const getCurrentActivity = createSelector(\n  [getWidget, getFeatures, getOwnProps],\n  (widget) => {\n    if (widget.get('secondaryActivityType')) return widget.get('secondaryActivityType');\n\n    return widget.get('primaryActivityType');\n  }\n);\n\n/**\n * Builds a space details object from store + calculated title & avatarid\n */\nexport const getSpaceDetails = createSelector(\n  [getWidget, getUsers, getSpaces, getCall],\n  (widget, users, spaces, call) => {\n    if (!widget.get('spaceDetails')) {\n      return null;\n    }\n\n    const spaceDetails = widget.get('spaceDetails').toJS();\n    const destination = widget.get('destination');\n\n    if (!destination) {\n      return spaceDetails;\n    }\n    const {\n      id,\n      type\n    } = destination;\n\n    let avatarId, displayName;\n\n    switch (type) {\n      case destinationTypes.SIP:\n      case destinationTypes.PSTN: {\n        if (call && call.locus && call.locus.self && call.locus.self\n          && call.locus.self.displayInfo) {\n          displayName = call.locus.self.displayInfo.primaryDisplayName;\n        }\n        else {\n          displayName = id;\n        }\n        break;\n      }\n      case destinationTypes.EMAIL: {\n        avatarId = users.getIn(['byEmail', id]);\n        displayName = users.getIn(['byId', avatarId, 'displayName']);\n        break;\n      }\n      case destinationTypes.USERID: {\n        const {id: userId} = validateAndDecodeId(id);\n\n        displayName = users.getIn(['byId', userId, 'displayName']);\n        avatarId = userId;\n        break;\n      }\n      case destinationTypes.SPACEID:\n        if (spaceDetails.type === 'direct') {\n          const currentUserId = users.get('currentUserId');\n          const toUser = users.get('byId').find((u) => u.get('id') !== currentUserId);\n\n          displayName = spaceDetails.title;\n          if (toUser) {\n            avatarId = toUser.get('id');\n          }\n        }\n        else {\n          const {id: tempId} = validateAndDecodeId(id);\n\n          displayName = spaces.getIn(['byId', tempId, 'displayName']);\n          avatarId = tempId;\n        }\n        break;\n      default:\n        displayName = null;\n    }\n\n    spaceDetails.avatarId = avatarId;\n    spaceDetails.title = displayName;\n\n    return spaceDetails;\n  }\n);\n\nexport const getActivityTypes = createSelector(\n  [getWidget, getFeatures, getOwnProps],\n  (widget, features, ownProps) => {\n    const {spaceActivities, call} = ownProps;\n    const destination = widget.get('destination');\n    const spaceType = widget.getIn(['spaceDetails', 'type']);\n    const filteredActivityTypes = [];\n    let activityTypes = widget.get('activityTypes').toJS();\n\n    if (spaceActivities) {\n      activityTypes = activityTypes.filter((a) => spaceActivities[a.name] !== false);\n    }\n    activityTypes.forEach((activityType) => {\n      let isValid = true;\n\n      // Filter activity Type based on spaceType\n      if (spaceType && !activityType.spaceTypes.includes(spaceType)) {\n        isValid = false;\n      }\n      // Filter activity type based on feature requirement\n      if (activityType.feature && !activityType.feature.hide && !features.getIn(['items', activityType.feature.key])) {\n        isValid = false;\n      }\n      // Hide flag on feature means to hide activity if feature is enabled\n      if (activityType.feature && activityType.feature.hide && features.getIn(['items', activityType.feature.key])) {\n        isValid = false;\n      }\n      // Filter based on destination type\n      if (\n        destination && destination.type\n        && ([destinationTypes.SIP, destinationTypes.PSTN].includes(destination.type) || call)\n        && ['message', 'files'].includes(activityType.name)\n      ) {\n        isValid = false;\n      }\n\n      if (isValid) {\n        filteredActivityTypes.push(activityType);\n      }\n    });\n\n    return filteredActivityTypes;\n  }\n);\n\nexport const getSpaceWidgetProps = createSelector(\n  [getWidget, getSpark, getMedia, getSpaceDetails, getActivityTypes, getCall, getMercuryStatus, getCurrentActivity],\n  (widget, spark, media, spaceDetails, activityTypes, call, mercuryStatus, currentActivity) => ({\n    activityTypes,\n    destination: widget.get('destination'),\n    media,\n    mercuryStatus: mercuryStatus.toJS(),\n    sparkInstance: spark.get('spark'),\n    sparkState: spark.get('status'),\n    spaceDetails,\n    widgetStatus: widget.get('status'),\n    call,\n    currentActivity\n  })\n);\n","import {compose, lifecycle} from 'recompose';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\n\nimport {fetchAvatar} from '@webex/redux-module-avatar';\nimport {resetConversation} from '@webex/redux-module-conversation';\nimport {resetErrors} from '@webex/redux-module-errors';\nimport {connectToMercury} from '@webex/redux-module-mercury';\nimport {fetchSpace} from '@webex/redux-module-spaces';\nimport {getUser} from '@webex/redux-module-users';\nimport {deconstructHydraId, validateAndDecodeId} from '@webex/react-component-utils';\n\nimport {\n  getSpaceDetails,\n  reloadWidget,\n  storeDestination,\n  updateWidgetStatus\n} from '../actions';\n\nimport {getSpaceWidgetProps} from '../selector';\n\nimport {destinationTypes} from '../constants';\n\nexport function setup(props, prevProps = {}) {\n  const {\n    conversation,\n    destination,\n    errors,\n    sparkInstance,\n    sparkState,\n    spaceDetails,\n    widgetStatus,\n    mercuryStatus,\n    users,\n    spaces\n  } = props;\n\n  if (sparkInstance\n      && sparkState.authenticated\n      && sparkState.registered\n      && !sparkState.hasError\n  ) {\n    // Check if we need to reload space\n    if (widgetStatus.shouldReloadWidget && prevProps && !prevProps.widgetStatus.shouldReloadWidget) {\n      props.resetConversation();\n      props.reloadWidget();\n      props.resetErrors();\n    }\n\n    // Check for destination Change\n    if (destination && prevProps.destination) {\n      const previousDestination = prevProps.destination;\n\n      if (\n        destination.id !== previousDestination.id\n        || destination.type !== previousDestination.type\n      ) {\n        sparkInstance.logger.info('Destination has changed, widget reloading...');\n        props.updateWidgetStatus({\n          shouldReloadWidget: true\n        });\n      }\n    }\n\n    // Connect to websocket (mercury)\n    if (!mercuryStatus.hasConnected\n      && !mercuryStatus.connecting\n      && !mercuryStatus.connected\n      && sparkState.registered) {\n      props.connectToMercury(sparkInstance);\n    }\n\n    // Get space details for given destination\n    // Get space details for given destination\n    if (!widgetStatus.isFetchingSpaceDetails && !errors.get('hasError') && !spaceDetails) {\n      // If the selector isn't returning a destination object and we have props for them, store\n      if (destination) {\n        // Use destination object from store to fetch space details\n        props.getSpaceDetails({\n          sparkInstance,\n          destinationId: destination.id,\n          destinationType: destination.type,\n          intl: props.intl\n        });\n        // Fetch 1:1 User details\n        if (destination.type === destinationTypes.EMAIL && !users.getIn(['byEmail', destination.id])) {\n          props.getUser({email: destination.id}, sparkInstance);\n        }\n        if (destination.type === destinationTypes.USERID && !users.getIn(['byId', destination.id])) {\n          props.getUser({id: destination.id}, sparkInstance);\n        }\n        if (destination.type === destinationTypes.SPACEID && !spaces.getIn(['byId', validateAndDecodeId(destination.id).id])) {\n          props.fetchSpace(sparkInstance, validateAndDecodeId(destination.id));\n        }\n      }\n      else {\n        // Destination has not been stored yet, process and store.\n        const {\n          destinationId,\n          destinationType\n        } = props;\n        let cluster;\n        let id = destinationId;\n\n        if (destinationType === destinationTypes.EMAIL && destinationId) {\n          id = destinationId.toLowerCase();\n        }\n        else if (destinationType === destinationTypes.SPACEID && destinationId) {\n          ({cluster} = deconstructHydraId(destinationId));\n        }\n\n        props.storeDestination({\n          id,\n          type: destinationType,\n          // Add cluster if cluster information exists\n          ...cluster && {cluster}\n        });\n      }\n    }\n\n    if (conversation.get('id')) {\n      props.fetchAvatar({space: conversation.toJS()}, sparkInstance);\n    }\n  }\n}\n\nexport default compose(\n  connect(\n    getSpaceWidgetProps,\n    (dispatch) => bindActionCreators({\n      connectToMercury,\n      fetchSpace,\n      getUser,\n      getSpaceDetails,\n      reloadWidget,\n      resetConversation,\n      resetErrors,\n      storeDestination,\n      updateWidgetStatus,\n      fetchAvatar\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillMount() {\n      setup(this.props);\n    },\n    shouldComponentUpdate(nextProps) {\n      return nextProps !== this.props;\n    },\n    componentWillReceiveProps(nextProps) {\n      setup(nextProps, this.props);\n    }\n  })\n);\n","import {connect} from 'react-redux';\nimport {compose, lifecycle} from 'recompose';\nimport {bindActionCreators} from 'redux';\nimport {addError, removeError} from '@webex/redux-module-errors';\n\nimport {eventNames} from '../events';\n\nimport {ACTIVITY_TYPE_PRIMARY, ACTIVITY_TYPE_SECONDARY} from './activity-menu';\n\nfunction changeCurrentActivity(props) {\n  const {\n    activityTypes,\n    setCurrentActivity\n  } = props;\n\n  // Check if activity is valid\n  const toActivity = activityTypes.find((activity) => activity.name === setCurrentActivity);\n\n  if (toActivity) {\n    if (toActivity.type === ACTIVITY_TYPE_PRIMARY) {\n      props.updateActivityType(setCurrentActivity);\n    }\n    if (toActivity.type === ACTIVITY_TYPE_SECONDARY) {\n      // Secondary activities need to have the menu opened\n      props.updateSecondaryActivityType(setCurrentActivity);\n    }\n    // Emit Event\n    props.onEvent(eventNames.ACTIVITY_CHANGED, toActivity);\n  }\n}\n\nfunction checkForExternalTrigger(nextProps, currentProps) {\n  const {\n    setCurrentActivity\n  } = nextProps;\n\n  // Change Current Activity\n  if (setCurrentActivity && setCurrentActivity !== currentProps.setCurrentActivity) {\n    changeCurrentActivity(nextProps);\n  }\n}\n\nexport default compose(\n  connect(\n    (state) => state,\n    (dispatch) => bindActionCreators({\n      addError,\n      removeError\n    }, dispatch)\n  ),\n  lifecycle({\n    componentWillReceiveProps(nextProps) {\n      checkForExternalTrigger(nextProps, this.props);\n    }\n  })\n);\n","import errors from './errors';\nimport setup from './setup';\nimport activityMenu from './activity-menu';\nimport externalControl from './external-control';\n\nexport default [\n  setup,\n  errors,\n  activityMenu,\n  externalControl\n];\n","import React, {Component} from 'react';\nimport PropTypes from 'prop-types';\nimport {connect} from 'react-redux';\nimport {bindActionCreators} from 'redux';\nimport classNames from 'classnames';\nimport {compose} from 'recompose';\nimport {Button, Icon} from '@momentum-ui/react';\n\nimport TitleBar from '@webex/react-component-title-bar';\nimport LoadingScreen from '@webex/react-component-loading-screen';\nimport Timer from '@webex/react-component-timer';\nimport ErrorDisplay from '@webex/react-component-error-display';\n\nimport {unregisterDevice} from '../../react-redux-spark/src/actions';\n\nimport ActivityMenu from './components/activity-menu';\n\nimport {storeDestination} from './actions';\nimport messages from './messages';\n\nimport './momentum.scss';\nimport styles from './styles.css';\n\nimport enhancers from './enhancers';\n\nimport {propTypes as activityMenuPropTypes} from './enhancers/activity-menu';\n\n\nconst injectedPropTypes = {\n  activityTypes: PropTypes.array.isRequired,\n  call: PropTypes.object,\n  conversation: PropTypes.object.isRequired,\n  currentActivity: PropTypes.string,\n  errors: PropTypes.object.isRequired,\n  sparkInstance: PropTypes.object,\n  widgetSpace: PropTypes.object.isRequired\n};\n\nexport const ownPropTypes = {\n  composerActions: PropTypes.shape({\n    attachFiles: PropTypes.bool\n  }),\n  customActivityTypes: PropTypes.object,\n  destinationId: PropTypes.string,\n  destinationType: PropTypes.oneOf(['email', 'userId', 'spaceId', 'sip', 'pstn']),\n  muteNotifications: PropTypes.bool,\n  secondaryActivitiesFullWidth: PropTypes.bool,\n  setCurrentActivity: PropTypes.string,\n  spaceActivities: PropTypes.shape({\n    files: PropTypes.bool,\n    meet: PropTypes.bool,\n    message: PropTypes.bool,\n    people: PropTypes.bool\n  }),\n  startCall: PropTypes.oneOfType([\n    PropTypes.string,\n    PropTypes.bool\n  ]),\n  ...activityMenuPropTypes,\n  ...injectedPropTypes\n};\n\nconst defaultProps = {\n  composerActions: {\n    attachFiles: true\n  },\n  customActivityTypes: undefined,\n  destinationId: null,\n  destinationType: null,\n  muteNotifications: false,\n  secondaryActivitiesFullWidth: true,\n  setCurrentActivity: '',\n  spaceActivities: {\n    files: true,\n    meet: true,\n    message: true,\n    people: true\n  },\n  startCall: false\n};\n\nexport class SpaceWidget extends Component {\n  componentWillUnmount() {\n    const {sparkInstance} = this.props;\n\n    // Make sure we unregister device when unmouting this component\n    this.props.unregisterDevice(sparkInstance);\n  }\n\n  render() {\n    const {props} = this;\n    const {\n      activityTypes,\n      call,\n      conversation,\n      currentActivity,\n      composerActions,\n      sparkInstance,\n      spaceDetails,\n      errors,\n      widgetSpace,\n      widgetStatus\n    } = props;\n    const {formatMessage} = props.intl;\n    let errorElement;\n\n    if (errors.get('hasError') || conversation.getIn(['status', 'error'])) {\n      let widgetError = errors.get('errors').first();\n\n      if (!widgetError) {\n        widgetError = {\n          displaySubtitle: conversation.getIn(['status', 'error', 'description']),\n          temporary: false,\n          title: formatMessage(messages.errorConversation)\n        };\n      }\n      errorElement = (\n        <div className={classNames('webex-error-wrapper', styles.errorWrapper)}>\n          <ErrorDisplay\n            secondaryTitle={widgetError.displaySubtitle}\n            title={widgetError.displayTitle}\n            transparent={widgetError.temporary}\n            {...widgetError}\n          />\n        </div>\n      );\n    }\n    if (sparkInstance && spaceDetails) {\n      // Construct widgets\n      const primaryActivityType = widgetSpace.get('primaryActivityType');\n      const secondaryActivityType = widgetSpace.get('secondaryActivityType');\n      const widgets = props.constructActivityWidgets(activityTypes, primaryActivityType, composerActions);\n      const secondaryWidget = props.constructSecondaryActivityWidget(activityTypes, secondaryActivityType);\n      const {avatarId, title = 'Loading...'} = spaceDetails;\n      const callStartTime = (call?.activeParticipantsCount > 0) ? call?.startTime : null;\n\n      let menuButton;\n\n      if (activityTypes) {\n        menuButton = [];\n        activityTypes.forEach((at) => {\n          if (at.name === 'meet') {\n            menuButton.push((\n              <span className={classNames(`webex-tab-${at.name}`, styles.tabMeet)}>\n                <Button\n                  ariaLabel={at.displayName}\n                  circle={!call}\n                  id={styles.huddle}\n                  color=\"green\"\n                  size={25}\n                  onClick={() => props.handleActivityChange(at)}\n                >\n                  <Icon name={`icon-${at.buttonType}_16`} style={{paddingRight: call?.startTime ? '0.5rem' : 'inherit'}} />\n                  {call?.startTime && <Timer startTime={call?.startTime} />}\n                </Button>\n              </span>\n            ));\n          }\n          else {\n            const tabActive = currentActivity === at.name;\n\n            menuButton.push((\n              <button\n                aria-label={at.displayName}\n                onClick={() => props.handleActivityChange(at)}\n                className={classNames(`webex-tab-${at.name}`, styles.tabOther, {[styles.tabActive]: tabActive})}\n                disabled={tabActive}\n              >\n                {at.displayName}\n              </button>\n            ));\n          }\n        });\n      }\n\n      return (\n        <div className={classNames('webex-space-widget', 'md', styles.spaceWidget)}>\n          { errorElement }\n          {\n            widgetStatus.get('activityMenuVisible') &&\n            <div className={classNames('webex-activity-menu-wrapper', styles.activityMenuWrapper)}>\n              <ActivityMenu\n                activityTypes={activityTypes}\n                onChange={props.handleActivityChange}\n                onExit={props.handleMenuClick}\n                showExitButton\n              />\n            </div>\n          }\n          {\n            secondaryWidget\n          }\n          <div className={classNames('webex-title-bar-wrapper', styles.titleBarWrapper)}>\n            <TitleBar avatarId={avatarId} name={title} type={spaceDetails.type}>\n              {\n                callStartTime &&\n                <div className={classNames('webex-title-bar-call-timer', styles.callTimer)}>\n                  <Timer startTime={callStartTime} />\n                </div>\n              }\n            </TitleBar>\n          </div>\n          <div className={classNames('webex-tabs', styles.tabContainer)}>\n            {menuButton}\n          </div>\n          <div className={classNames('webex-widget-body', styles.widgetBody)}>\n            {widgets}\n          </div>\n        </div>\n      );\n    }\n    if (errors.get('hasError')) {\n      return errorElement;\n    }\n\n    return <LoadingScreen />;\n  }\n}\n\nSpaceWidget.propTypes = ownPropTypes;\nSpaceWidget.defaultProps = defaultProps;\n\n\nexport default compose(\n  connect(\n    null,\n    (dispatch) => bindActionCreators({\n      storeDestination,\n      unregisterDevice\n    }, dispatch)\n  ),\n  ...enhancers\n)(SpaceWidget);\n","export default {};\n","import {compose} from 'recompose';\nimport {constructWebexEnhancer, withIntl} from '@webex/webex-widget-base';\nimport {enhancer as mercuryEnhancer} from '@webex/redux-module-mercury';\n\nimport reducers from './reducer';\nimport ConnectedSpace from './container';\nimport messages from './translations/en';\nimport events from './events';\nimport {destinationTypes} from './constants';\n\nconst {eventNames} = events;\n\nexport {eventNames};\n\nexport {reducers};\n\nexport {destinationTypes};\n\nexport default compose(\n  constructWebexEnhancer({\n    name: 'space',\n    reducers\n  }),\n  mercuryEnhancer,\n  withIntl({locale: 'en', messages})\n)(ConnectedSpace);\n"],"names":["defineMessages","errorConnection","id","defaultMessage","errorNotFound","errorBadToken","errorToSelf","badSpaceId","disabledInitialActivity","unableToLoad","unknownDestination","invalidDestination","unknownError","reconnecting","errorConversation","destinationTypes","EMAIL","USERID","SPACEID","SIP","PSTN","FETCHING_SPACE_DETAILS","RELOAD_WIDGET","STORE_ACTIVITY_TYPES","STORE_DESTINATION","STORE_SPACE_DETAILS","TOGGLE_ACTIVITY_MENU_VISIBLE","UPDATE_ACTIVITY_TYPE","UPDATE_ACTIVITY_TYPE_SECONDARY","UPDATE_ACTIVITY_MENU_VISIBLE","UPDATE_WIDGET_STATUS","updateActivityType","type","payload","updateSecondaryActivityType","reloadWidget","storeDestination","cluster","toggleActivityMenuVisible","storeSpaceDetails","details","storeActivityTypes","activityTypes","updateWidgetStatus","status","fetchingSpaceDetails","getSpaceDetails","sparkInstance","destinationId","destinationType","intl","dispatch","includes","formatMessage","spaceIdUUID","validateAndDecodeId","displayTitle","messages","displaySubtitle","addError","temporary","request","service","resource","then","res","body","catch","error","statusCode","code","Status","Record","activityMenuVisible","hasError","hasFetchedFeatureFlags","isFetchingFeatureFlags","isFetchingSpaceDetails","shouldReloadWidget","Destination","initialState","fromJS","destination","primaryActivityType","secondaryActivityType","spaceDetails","reducer","state","action","set","isActivityMenuVisible","setIn","getIn","Object","assign","mergeIn","reducers","message","meet","roster","errors","features","users","mercury","media","spaces","widgetSpace","UNREGISTER_DEVICE_FAILURE","UPDATE_SPARK_STATUS","unregisterDeviceFailure","updateSparkStatus","unregisterDevice","spark","unregistering","internal","device","unregister","registered","propTypes","PropTypes","array","isRequired","onChange","func","onExit","defaultProps","SpaceActivityMenu","handleChange","activity","buttons","map","a","label","displayName","buttonClassName","buttonType","onClick","styleInject","css","ref","insertAt","document","head","getElementsByTagName","style","createElement","firstChild","insertBefore","appendChild","styleSheet","cssText","createTextNode","eventNames","SPACES_READ","SPACES_UNREAD","MESSAGES_CREATED","CALLS_CREATED","CALLS_CONNECTED","CALLS_DISCONNECTED","CALL_MEMBERSHIPS_NOTIFIED","CALL_MEMBERSHIPS_CONNECTED","CALL_MEMBERSHIPS_DECLINED","CALL_MEMBERSHIPS_DISCONNECTED","ACTIVITY_CHANGED","ACTIVITY_TYPE_PRIMARY","ACTIVITY_TYPE_SECONDARY","DEFAULT_ACTIVITY","initialActivity","string","constructActivityWidgets","props","composerActions","filter","activityType","Widget","component","isVisible","name","styles","hidden","classNames","activityComponentWrapper","toPerson","constructSecondaryActivityWidget","secondaryWidgetClassNames","secondaryWidget","secondaryActivitiesFullWidth","secondaryWidgetFull","secondaryWidgetCover","handleActivityChange","onEvent","handleSecondaryDismiss","handleMenuClick","getFeatureFlags","widgetStatus","get","toJS","forEach","feature","getFeature","key","compose","connect","bindActionCreators","setPropTypes","withHandlers","lifecycle","componentWillMount","DEFAULT_ACTIVITY_TYPES","messageButton","MessageWidget","spaceTypes","filesButton","FilesWidget","onClickClose","onClickMenu","peopleButton","color","icon","RosterWidget","meetButton","MeetWidget","customActivityTypes","concat","componentWillReceiveProps","nextProps","sparkState","call","find","prevCall","hasMeet","some","hasMessage","checkForMercuryErrors","mercuryError","isMercuryConnected","isMercuryDisconnected","hasMercuryError","has","hasNoMercuryError","removeError","checkForRegistrationErrors","registerErrorId","checkForDestinationErrors","currentUser","missingDestinationErrorId","toSelfErrorId","email","invalidDestinationErrorId","isUuid","checkActivityTypes","length","invalidActivityId","defaultActivity","validActivity","checkForErrors","getWidget","getSpark","getMedia","getConversation","conversation","getFeatures","getUsers","getSpaces","getOwnProps","ownProps","getMercuryStatus","getCall","createSelector","widget","mediaId","matchedCall","locus","host","phoneNumber","startsWith","info","sipUri","url","isDismissed","getCurrentActivity","avatarId","self","displayInfo","primaryDisplayName","userId","currentUserId","toUser","u","title","tempId","getActivityTypes","spaceActivities","spaceType","filteredActivityTypes","isValid","hide","push","getSpaceWidgetProps","mercuryStatus","currentActivity","setup","prevProps","authenticated","resetConversation","resetErrors","previousDestination","logger","hasConnected","connecting","connected","connectToMercury","getUser","fetchSpace","toLowerCase","deconstructHydraId","fetchAvatar","space","shouldComponentUpdate","changeCurrentActivity","setCurrentActivity","toActivity","checkForExternalTrigger","currentProps","activityMenu","externalControl","injectedPropTypes","object","ownPropTypes","shape","attachFiles","bool","oneOf","muteNotifications","files","people","startCall","oneOfType","activityMenuPropTypes","undefined","SpaceWidget","Component","componentWillUnmount","render","errorElement","widgetError","first","errorWrapper","widgets","callStartTime","activeParticipantsCount","startTime","menuButton","at","tabMeet","huddle","paddingRight","tabActive","tabOther","spaceWidget","activityMenuWrapper","ActivityMenu","titleBarWrapper","callTimer","tabContainer","widgetBody","enhancers","events","constructWebexEnhancer","mercuryEnhancer","withIntl","locale","ConnectedSpace"],"mappings":"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"}