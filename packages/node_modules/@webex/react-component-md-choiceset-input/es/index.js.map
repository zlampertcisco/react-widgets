{"version":3,"file":"index.js","sources":["../src/index.js"],"sourcesContent":["/* eslint no-underscore-dangle: 0  */\n\nimport React from 'react';\nimport {Select, SelectOption, RadioGroup, Radio} from '@momentum-ui/react';\nimport * as AdaptiveCard from 'adaptivecards';\nimport classnames from 'classnames';\nimport {v4 as UUID} from 'uuid';\nimport {renderCardElement, DEFAULT_VALUE_CHECK_BOX} from '@webex/react-component-utils';\n\n/**\n * Replaces Choice Set(radio button and checkboxes) of adaptive Card with MD(Momentum Design) Select and Radio Group\n * @returns {HTMLElement}\n */\nclass MDChoiceSetInput extends AdaptiveCard.ChoiceSetInput {\n  constructor(addChildNode) {\n    super();\n    this.addChildNode = addChildNode;\n    this._toggleInputs = [];\n  }\n\n  /**\n   * returns the assigned value to internalRender() method\n   * @returns {string}\n   */\n  get value() {\n    return this._value;\n  }\n\n  /**\n   * assigns the value when the data is sent in the JSON request\n   * @param {string} newValue\n   */\n  set value(newValue) {\n    this._value = newValue;\n  }\n\n  /**\n   * Renders the momentum design `<Select />` and `<RadioGroup />` components\n   * @returns {HTMLElement}\n   */\n  internalRender() {\n    this._selectElement = document.createElement('div');\n    if (!this.isMultiSelect) {\n      const defaultChoice = this.choices.find((choice) => this.defaultValue === choice.value) || null;\n\n      this.value = this.defaultValue || null;\n\n      if (this.isCompact) {\n        // Render Select box\n        let defaultOptionText = null;\n\n        if (defaultChoice === null && this.choices.length > 0) {\n          defaultOptionText = this.choices[0].title;\n        }\n\n        if (this.placeholder) {\n          defaultOptionText = this.placeholder;\n        }\n\n        const jsx = (\n          <Select\n            defaultValue={defaultChoice ? defaultChoice.title : defaultOptionText}\n            onSelect={(choice) => {\n              this.value = (choice.length && choice[0].value) || null;\n            }}\n            className={classnames('ac-input', 'ac-multichoiceInput')}\n            isDynamic={false}\n          >\n            {this.choices.map((choice) => (\n              <SelectOption key={choice.value} value={choice.value} label={choice.title} />\n            ))}\n          </Select>\n        );\n\n        renderCardElement(jsx, this._selectElement, this.addChildNode);\n\n        return this._selectElement;\n      }\n\n      // Render radio button for non-compact single-valued ChoiceSets\n      const radioGroupName = `__ac-category-${UUID()}`;\n      const jsx = (\n        <RadioGroup\n          className={classnames('ac-input')}\n          name={radioGroupName}\n          onChange={(newValue) => {\n            this.value = newValue;\n          }}\n          values={[this.defaultValue]} // This array sets the default value\n        >\n          {this.choices.map((choice) => (\n            <Radio\n              label={choice.title}\n              htmlId={UUID()} // required for labelFor attribute\n              key={choice.value}\n              value={choice.value}\n            />\n          ))}\n        </RadioGroup>\n      );\n\n      renderCardElement(jsx, this._selectElement, this.addChildNode);\n\n      return this._selectElement;\n    }\n\n    // Render Checkboxes\n    const defaultOptionText = this.title || this.placeholder || DEFAULT_VALUE_CHECK_BOX;\n\n    this.value = this.defaultValue; // this.value should be delimiter separated string\n\n    const jsx = (\n      <Select\n        className={classnames('ac-input')}\n        defaultValue={defaultOptionText} // This is the label. Default values for multiselect not supported in MD\n        onSelect={(choices) => {\n          this.value = choices.map((choice) => choice.value).join(this.hostConfig.choiceSetInputValueSeparator) || null;\n        }}\n        isMulti\n        isDynamic={false}\n      >\n        {this.choices.map((choice) => (\n          <SelectOption\n            key={choice.value}\n            value={choice.value}\n            label={choice.title}\n          />\n        ))}\n      </Select>\n    );\n\n    renderCardElement(jsx, this._selectElement, this.addChildNode);\n\n    return this._selectElement;\n  }\n}\n\nexport default MDChoiceSetInput;\n"],"names":["MDChoiceSetInput","AdaptiveCard","ChoiceSetInput","constructor","addChildNode","_toggleInputs","value","_value","newValue","internalRender","_selectElement","document","createElement","isMultiSelect","defaultChoice","choices","find","choice","defaultValue","isCompact","defaultOptionText","length","title","placeholder","jsx","classnames","map","renderCardElement","radioGroupName","UUID","DEFAULT_VALUE_CHECK_BOX","join","hostConfig","choiceSetInputValueSeparator"],"mappings":"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"}