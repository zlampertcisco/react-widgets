{"version":3,"file":"index.js","sources":["../src/helpers.js","../src/actions.js","../src/reducer.js"],"sourcesContent":["export function constructActivity(activity) {\n  return {\n    id: activity.id,\n    actor: activity.actor ? activity.actor.id : undefined,\n    type: activity.verb,\n    objectType: activity.objectType,\n    published: activity.published,\n    object: activity.object,\n    url: activity.url\n  };\n}\n\nexport function constructActivities(activities) {\n  return activities.map(constructActivity);\n}\n","import {\n  constructActivity,\n  constructActivities\n} from './helpers';\n\nexport const STORE_ACTIVITIES = 'activities/STORE_ACTIVITIES';\nexport const UPDATE_ACTIVITY = 'activities/UPDATE_ACTIVITY';\nexport const DELETE_ACTIVITY = 'activities/DELETE_ACTIVITY';\n\n\nexport function storeActivities(activities) {\n  return {\n    type: STORE_ACTIVITIES,\n    payload: {\n      activities: constructActivities(activities)\n    }\n  };\n}\n\nexport function updateActivity(activity) {\n  return {\n    type: UPDATE_ACTIVITY,\n    payload: {\n      activity: constructActivity(activity)\n    }\n  };\n}\n\n\n/**\n * \"Delete\" an activity == tombstoning the activity\n *\n * @export\n * @param {Object} activity\n * @returns {Object} redux action\n */\nexport function deleteActivity(activity) {\n  const tombstoneActivity = Object.assign({}, activity, {\n    verb: 'tombstone'\n  });\n\n  return {\n    type: DELETE_ACTIVITY,\n    payload: {\n      activitiy: constructActivity(tombstoneActivity)\n    }\n  };\n}\n","import {Record, Map} from 'immutable';\n\nimport {\n  STORE_ACTIVITIES,\n  UPDATE_ACTIVITY,\n  DELETE_ACTIVITY\n} from './actions';\n\nexport const Activity = Record({\n  id: null,\n  actor: null,\n  type: '',\n  object: {}\n});\n\nexport const initialState = Map({\n  byId: Map()\n});\n\nexport default function reducer(state = initialState, action) {\n  switch (action.type) {\n    case STORE_ACTIVITIES: {\n      const activities = {};\n\n      action.payload.activities.forEach((a) => {\n        activities[a.id] = new Activity(a);\n      });\n\n      return state.mergeIn(['byId'], activities);\n    }\n\n    case UPDATE_ACTIVITY: {\n      const {activity} = action.payload;\n\n      return state.mergeDeepIn(['byId', activity.id], activity);\n    }\n\n    case DELETE_ACTIVITY: {\n      const {activity} = action.payload;\n\n      return state.setIn(['byId', activity.id], activity);\n    }\n    default:\n      return state;\n  }\n}\n"],"names":["constructActivity","activity","id","actor","undefined","type","verb","objectType","published","object","url","constructActivities","activities","map","STORE_ACTIVITIES","UPDATE_ACTIVITY","DELETE_ACTIVITY","storeActivities","payload","updateActivity","deleteActivity","tombstoneActivity","Object","assign","activitiy","Activity","Record","initialState","Map","byId","reducer","state","action","forEach","a","mergeIn","mergeDeepIn","setIn"],"mappings":";;AAAO,SAASA,iBAAT,CAA2BC,QAA3B,EAAqC;AAC1C,SAAO;AACLC,IAAAA,EAAE,EAAED,QAAQ,CAACC,EADR;AAELC,IAAAA,KAAK,EAAEF,QAAQ,CAACE,KAAT,GAAiBF,QAAQ,CAACE,KAAT,CAAeD,EAAhC,GAAqCE,SAFvC;AAGLC,IAAAA,IAAI,EAAEJ,QAAQ,CAACK,IAHV;AAILC,IAAAA,UAAU,EAAEN,QAAQ,CAACM,UAJhB;AAKLC,IAAAA,SAAS,EAAEP,QAAQ,CAACO,SALf;AAMLC,IAAAA,MAAM,EAAER,QAAQ,CAACQ,MANZ;AAOLC,IAAAA,GAAG,EAAET,QAAQ,CAACS;AAPT,GAAP;AASD;AAEM,SAASC,mBAAT,CAA6BC,UAA7B,EAAyC;AAC9C,SAAOA,UAAU,CAACC,GAAX,CAAeb,iBAAf,CAAP;AACD;;MCTYc,gBAAgB,GAAG;MACnBC,eAAe,GAAG;MAClBC,eAAe,GAAG;AAGxB,SAASC,eAAT,CAAyBL,UAAzB,EAAqC;AAC1C,SAAO;AACLP,IAAAA,IAAI,EAAES,gBADD;AAELI,IAAAA,OAAO,EAAE;AACPN,MAAAA,UAAU,EAAED,mBAAmB,CAACC,UAAD;AADxB;AAFJ,GAAP;AAMD;AAEM,SAASO,cAAT,CAAwBlB,QAAxB,EAAkC;AACvC,SAAO;AACLI,IAAAA,IAAI,EAAEU,eADD;AAELG,IAAAA,OAAO,EAAE;AACPjB,MAAAA,QAAQ,EAAED,iBAAiB,CAACC,QAAD;AADpB;AAFJ,GAAP;AAMD;AAGD;AACA;AACA;AACA;AACA;AACA;AACA;;AACO,SAASmB,cAAT,CAAwBnB,QAAxB,EAAkC;AACvC,QAAMoB,iBAAiB,GAAGC,MAAM,CAACC,MAAP,CAAc,EAAd,EAAkBtB,QAAlB,EAA4B;AACpDK,IAAAA,IAAI,EAAE;AAD8C,GAA5B,CAA1B;AAIA,SAAO;AACLD,IAAAA,IAAI,EAAEW,eADD;AAELE,IAAAA,OAAO,EAAE;AACPM,MAAAA,SAAS,EAAExB,iBAAiB,CAACqB,iBAAD;AADrB;AAFJ,GAAP;AAMD;;ACvCM,MAAMI,QAAQ,GAAGC,MAAM,CAAC;AAC7BxB,EAAAA,EAAE,EAAE,IADyB;AAE7BC,EAAAA,KAAK,EAAE,IAFsB;AAG7BE,EAAAA,IAAI,EAAE,EAHuB;AAI7BI,EAAAA,MAAM,EAAE;AAJqB,CAAD,CAAvB;MAOMkB,YAAY,GAAGC,GAAG,CAAC;AAC9BC,EAAAA,IAAI,EAAED,GAAG;AADqB,CAAD;AAIhB,SAASE,OAAT,CAAiBC,KAAK,GAAGJ,YAAzB,EAAuCK,MAAvC,EAA+C;AAC5D,UAAQA,MAAM,CAAC3B,IAAf;AACE,SAAKS,gBAAL;AAAuB;AACrB,cAAMF,UAAU,GAAG,EAAnB;AAEAoB,QAAAA,MAAM,CAACd,OAAP,CAAeN,UAAf,CAA0BqB,OAA1B,CAAmCC,CAAD,IAAO;AACvCtB,UAAAA,UAAU,CAACsB,CAAC,CAAChC,EAAH,CAAV,GAAmB,IAAIuB,QAAJ,CAAaS,CAAb,CAAnB;AACD,SAFD;AAIA,eAAOH,KAAK,CAACI,OAAN,CAAc,CAAC,MAAD,CAAd,EAAwBvB,UAAxB,CAAP;AACD;;AAED,SAAKG,eAAL;AAAsB;AACpB,cAAM;AAACd,UAAAA;AAAD,YAAa+B,MAAM,CAACd,OAA1B;AAEA,eAAOa,KAAK,CAACK,WAAN,CAAkB,CAAC,MAAD,EAASnC,QAAQ,CAACC,EAAlB,CAAlB,EAAyCD,QAAzC,CAAP;AACD;;AAED,SAAKe,eAAL;AAAsB;AACpB,cAAM;AAACf,UAAAA;AAAD,YAAa+B,MAAM,CAACd,OAA1B;AAEA,eAAOa,KAAK,CAACM,KAAN,CAAY,CAAC,MAAD,EAASpC,QAAQ,CAACC,EAAlB,CAAZ,EAAmCD,QAAnC,CAAP;AACD;;AACD;AACE,aAAO8B,KAAP;AAvBJ;AAyBD;;;;;"}